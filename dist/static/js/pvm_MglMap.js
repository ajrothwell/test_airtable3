(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pvm_MglMap"],{"24a1":function(t,e,n){},"4b1e":function(t,e,n){"use strict";var o=n("24a1"),a=n.n(o);a.a},"4fad":function(t,e,n){var o=n("23e7"),a=n("6f53").entries;o({target:"Object",stat:!0},{entries:function(t){return a(t)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var o=n("1d80"),a=n("5899"),i="["+a+"]",r=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),u=function(t){return function(e){var n=String(o(e));return 1&t&&(n=n.replace(r,"")),2&t&&(n=n.replace(c,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},"6f53":function(t,e,n){var o=n("83ab"),a=n("df75"),i=n("fc6a"),r=n("d1e7").f,c=function(t){return function(e){var n,c=i(e),u=a(c),s=u.length,l=0,m=[];while(s>l)n=u[l++],o&&!r.call(c,n)||m.push(t?[n,c[n]]:c[n]);return m}};t.exports={entries:c(!0),values:c(!1)}},7156:function(t,e,n){var o=n("861d"),a=n("d2bb");t.exports=function(t,e,n){var i,r;return a&&"function"==typeof(i=e.constructor)&&i!==n&&o(r=i.prototype)&&r!==n.prototype&&a(t,r),t}},"7f84":function(t,e,n){(function(e,n){t.exports=n()})(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e);var o=[{name:"moveend",check:function(t,e){return e.center&&t.isMoving()}},{name:"zoomend",check:function(t,e){return void 0!==e.zoom&&null!==e.zoom&&t.isZooming()}},{name:"rotateend",check:function(t,e){return void 0!==e.bearing&&null!==e.bearing&&t.isRotating()}},{name:"pitchend",check:function(t,e){return void 0!==e.pitch&&null!==e.bearing&&t.isMoving()}}],a=function(t){return{center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch()}},i={events:o,getter:a},r={events:[{name:"moveend",check:function(t){return t.isMoving()}}],getter:function(t){return{center:t.getCenter()}}},c={events:[{name:"zoomend",check:function(t){return t.isZooming()}}],getter:function(t){return{zoom:t.getZoom()}}},u={events:[{name:"rotateend",check:function(t){return t.isRotating()}}],getter:function(t){return{bearing:t.getBearing()}}},s={setCenter:r,panBy:r,panTo:r,setZoom:c,zoomTo:c,zoomIn:c,zoomOut:c,setBearing:u,rotateTo:u,resetNorth:u,snapToNorth:u,setPitch:{events:[{name:"pitchend",check:function(t){return!0}}],getter:function(t){return{pitch:t.getPitch()}}},fitBounds:{events:[{name:"zoomend",check:function(t){return t.isZooming()}},{name:"moveend",check:function(t){return t.isMoving()}},{name:"rotateend",check:function(t){return t.isRotating()}}],getter:function(t){return{zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),center:t.getCenter()}}},fitScreenCoordinates:{events:[{name:"zoomend",check:function(t,e){return t.isZooming()}},{name:"moveend",check:function(t,e){return t.isMoving()}},{name:"rotateend",check:function(t,e){return e.bearing&&t.isRotating()}}],getter:function(t){return{zoom:t.getZoom(),center:t.getCenter(),bearing:t.getBearing(),pitch:t.getPitch()}}},jumpTo:i,easeTo:i,flyTo:i};function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){f(t,e,n[e])}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){return"".concat(t,"-").concat((""+Math.random()).split(".")[1])}function d(t,e,n,o){var a=function a(i){i.type===e&&i.eventId===n&&(t.off(e,a),o(i))};return a}function h(t,e){var n=t[e],o=n.length;return function(){for(var a=[],i={eventId:p(e)},r=s[e].events.map((function(e,n){return{event:e,func:new Promise((function(o,r){a[n]={event:e,func:d(t,e.name,i.eventId,o)},t.on(e.name,a[n].func)}))}})),c=[],u=0;u<o;u++)u===o-1?c.push(m({},i,(u<0||arguments.length<=u?void 0:arguments[u])||{})):c.push((u<0||arguments.length<=u?void 0:arguments[u])||null);var f=[],h=(arguments.length<=0?void 0:arguments[0])||{};try{n.apply(t,c),"fitBounds"===e&&(h={}),"fitScreenCoordinates"===e&&(h={bearing:null},h.bearing=null,"number"===typeof(arguments.length<=2?void 0:arguments[2])&&(h.bearing=arguments.length<=2?void 0:arguments[2]),(arguments.length<=3?void 0:arguments[3])&&"object"===l(arguments.length<=3?void 0:arguments[3])&&(h=m({},h,arguments.length<=3?void 0:arguments[3]))),f=r.map((function(e){var n=e.event,o=e.func;return n.check(t,h)?o:(t.off(n.name,o),Promise.resolve())}))}catch(g){throw a.forEach((function(e){var n=e.event,o=e.func;t.off(n.name,o)})),g}return Promise.all(f).then((function(){return s[e].getter(t)}))}}var g=h,v=function(t){var e=Object.keys(s),n={};return e.forEach((function(o){-1!==e.indexOf(o)&&(n[o]=g(t,o))})),n};function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?g(t,e):v(t)}n.d(e,"default",(function(){return b}))}])["default"]}))},"818b":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.mapContainerClass+" mgl-map-wrapper",attrs:{id:"map-container"}},[t._m(0),t.initialized?t._t("default"):t._e()],2)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",attrs:{id:t.container}})}],i=(n("d81d"),n("b64b"),n("d3b7"),n("b85c")),r=n("5530"),c=n("9f0b"),u={resize:{name:"resize"},webglcontextlost:{name:"webglcontextlost"},webglcontextrestored:{name:"webglcontextrestored"},remove:{name:"remove"},movestart:{name:"movestart"},load:{name:"load"},contextmenu:{name:"contextmenu"},dblclick:{name:"dblclick"},click:{name:"click"},touchcancel:{name:"touchcancel"},touchmove:{name:"touchmove"},touchend:{name:"touchend"},touchstart:{name:"touchstart"},dataloading:{name:"dataloading"},mousemove:{name:"mousemove"},mouseup:{name:"mouseup"},mousedown:{name:"mousedown"},sourcedataloading:{name:"sourcedataloading"},error:{name:"error"},data:{name:"data"},styledata:{name:"styledata"},sourcedata:{name:"sourcedata"},mouseout:{name:"mouseout"},styledataloading:{name:"styledataloading"},moveend:{name:"moveend"},move:{name:"move"},render:{name:"render"},zoom:{name:"zoom"},zoomstart:{name:"zoomstart"},zoomend:{name:"zoomend"},boxzoomstart:{name:"boxzoomstart"},boxzoomcancel:{name:"boxzoomcancel"},boxzoomend:{name:"boxzoomend"},rotate:{name:"rotate"},rotatestart:{name:"rotatestart"},rotateend:{name:"rotateend"},dragend:{name:"dragend"},drag:{name:"drag"},dragstart:{name:"dragstart"},pitch:{name:"pitch"},idle:{name:"idle"}},s=(n("caad"),n("a9e3"),n("ac1f"),n("1276"),{container:{type:[String,HTMLElement],default:function(){return"map-".concat((""+Math.random()).split(".")[1])}},accessToken:{type:String,default:void 0},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},mapStyle:{type:[String,Object],required:!0},hash:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0},bearingSnap:{type:Number,default:7},pitchWithRotate:{type:Boolean,default:!0},clickTolerance:{type:Number,default:3},attributionControl:{type:Boolean,default:!0},customAttribution:{type:[String,Array],default:null},logoPosition:{type:String,default:"bottom-left",validator:function(t){return["top-left","top-right","bottom-left","bottom-right"].includes(t)}},failIfMajorPerformanceCaveat:{type:Boolean,default:!1},preserveDrawingBuffer:{type:Boolean,default:!1},refreshExpiredTiles:{type:Boolean,default:!0},maxBounds:{type:Array,default:function(){}},scrollZoom:{type:[Boolean,Object],default:function(){return!0}},boxZoom:{type:Boolean,default:!0},dragRotate:{type:Boolean,default:!0},dragPan:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},touchZoomRotate:{type:[Boolean,Object],default:function(){return!0}},trackResize:{type:Boolean,default:!0},center:{type:[Object,Array],default:void 0},zoom:{type:Number,default:0},bearing:{type:Number,default:0},pitch:{type:Number,default:0},bounds:{type:[Object,Array],default:void 0},fitBoundsOptions:{type:Object,default:void 0},renderWorldCopies:{type:Boolean,default:!0},RTLTextPluginUrl:{type:String,default:void 0},light:{type:Object,default:void 0},tileBoundaries:{type:Boolean,default:!1},collisionBoxes:{type:Boolean,default:!1},repaint:{type:Boolean,default:!1},transformRequest:{type:Function,default:null},maxTileCacheSize:{type:Number,default:null},localIdeographFontFamily:{type:String,default:null},collectResourceTiming:{type:Boolean,default:!1},fadeDuration:{type:Number,default:300},crossSourceCollisions:{type:Boolean,default:!0}}),l=(n("4160"),n("4fad"),n("159b"),{maxBounds:function(t){this.map.setMaxBounds(t)},minZoom:function(t){this.map.setMinZoom(t)},maxZoom:function(t){this.map.setMaxZoom(t)},mapStyle:function(t){this.map.setStyle(t)},collisionBoxes:function(t){this.map.showCollisionBoxes=t},tileBoundaries:function(t){this.map.showTileBoundaries=t},repaint:function(t){this.map.repaint=t},zoom:function(t){this.map.setZoom(t)},center:function(t){this.map.setCenter(t)},bearing:function(t){this.map.setBearing(t)},pitch:function(t){this.map.setPitch(t)},light:function(t){this.map.setLigh(t)}});function m(t,e,n,o){var a=this;this.initial||(this.$listeners["update:".concat(t)]?(this.propsIsUpdating[t]?(this._watcher.active=!1,this.$nextTick((function(){a._watcher.active=!0}))):(this._watcher.active=!0,e(n,o)),this.propsIsUpdating[t]=!1):e(n,o))}function f(){var t={};return Object.entries(l).forEach((function(e){t[e[0]]=function(t,n){return m.call(this,e[0],e[1].bind(this),t,n)}})),t}var p={watch:f()},d=(n("2532"),{methods:{$_updateSyncedPropsFabric:function(t,e){var n=this;return function(){n.propsIsUpdating[t]=!0;var o="function"===typeof e?e():e;return n.$emit("update:".concat(t),o)}},$_bindPropsUpdateEvents:function(){var t=this,e=[{events:["moveend"],prop:"center",getter:this.map.getCenter.bind(this.map)},{events:["zoomend"],prop:"zoom",getter:this.map.getZoom.bind(this.map)},{events:["rotate"],prop:"bearing",getter:this.map.getBearing.bind(this.map)},{events:["pitch"],prop:"pitch",getter:this.map.getPitch.bind(this.map)}];e.forEach((function(e){var n=e.events,o=e.prop,a=e.getter;n.forEach((function(e){t.$listeners["update:".concat(o)]&&t.map.on(e,t.$_updateSyncedPropsFabric(o,a))}))}))},$_loadMap:function(){var t=this;return console.log("$_loadMap is running"),this.mapboxPromise.then((function(e){return console.log("inside $_loadMap then"),t.mapbox=e.default?e.default:e,new Promise((function(e){t.accessToken&&(t.mapbox.accessToken=t.accessToken),console.log("inside $_loadMap, about to create map, this.$refs.container:",t.$refs.container);var n=new t.mapbox.Map(Object(r["a"])(Object(r["a"])({},t._props),{},{container:t.$refs.container,style:t.mapStyle}));console.log("inside $_loadMap, map:",n),n.on("load",(function(){console.log('inside map.on("load")'),e(n)}))}))}))},$_RTLTextPluginError:function(t){this.$emit("rtl-plugin-error",{map:this.map,error:t})},$_bindMapEvents:function(t){var e=this;Object.keys(this.$listeners).forEach((function(n){t.includes(n)&&e.map.on(n,e.$_emitMapEvent)}))},$_unbindEvents:function(t){var e=this;t.forEach((function(t){e.map.off(t,e.$_emitMapEvent)}))}}}),h=n("7f84"),g=n.n(h),v={created:function(){this.actions={}},methods:{$_registerAsyncActions:function(t){this.actions=Object(r["a"])(Object(r["a"])({},g()(t)),{},{stop:function(){var t=this;this.map.stop();var e={pitch:this.map.getPitch(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),center:this.map.getCenter()};return Object.entries(e).forEach((function(e){t.$_updateSyncedPropsFabric(e[0],e[1])()})),Promise.resolve(e)}})}}},b={name:"GlMap",mixins:[p,v,d,c["a"]],props:Object(r["a"])({mapboxGl:{type:Object,default:null}},s),provide:function(){var t=this;return{get mapbox(){return t.mapbox},get map(){return t.map},get actions(){return t.actions}}},data:function(){return{initial:!0,initialized:!1}},computed:{cyclomediaActive:function(){var t;return this.$store.state.cyclomedia&&(t=this.$store.state.cyclomedia.active),t},pictometryActive:function(){var t;return this.$store.state.pictometry&&(t=this.$store.state.pictometry.active),t},picOrCycloActive:function(){return!(!this.cyclomediaActive&&!this.pictometryActive)},mapContainerClass:function(){var t;return this.$config&&(t=!this.picOrCycloActive||"horizontal"!==this.$config.cyclomedia.orientation&&"horizontal"!==this.$config.pictometry.orientation?this.picOrCycloActive?this.$config.map.containerClassWCyclo?this.$config.map.containerClassWCyclo:"height50":this.$config.map.containerClass?this.$config.map.containerClass:"map-container":this.$config.map.containerClassWCyclo?this.$config.map.containerClassWCyclo:"height50"),t},loaded:function(){return!!this.map&&this.map.loaded()},version:function(){return this.map?this.map.version:null},isStyleLoaded:function(){return!!this.map&&this.map.isStyleLoaded()},areTilesLoaded:function(){return!!this.map&&this.map.areTilesLoaded()},isMoving:function(){return!!this.map&&this.map.isMoving()},canvas:function(){return this.map?this.map.getCanvas():null},canvasContainer:function(){return this.map?this.map.getCanvasContainer():null},images:function(){return this.map?this.map.listImages():null}},created:function(){this.map=null,this.propsIsUpdating={},this.mapboxPromise=this.mapboxGl?Promise.resolve(this.mapboxGl):n.e("chunk-2d22497b").then(n.t.bind(null,"e192",7)),console.log("end of GlMap.vue created")},mounted:function(){var t=this;console.log("GlMap.vue mounted, this:",this),this.$_loadMap().then((function(e){console.log("inside $_loadMap then, map:",e),t.map=e,void 0!==t.RTLTextPluginUrl&&t.mapbox.setRTLTextPlugin(t.RTLTextPluginUrl,t.$_RTLTextPluginError);var n=Object.keys(u);t.$_bindMapEvents(n),t.$_registerAsyncActions(e),t.$_bindPropsUpdateEvents(),t.initial=!1,t.initialized=!0,t.testMethod(e),t.$emit("load",{map:e,component:t})}))},beforeDestroy:function(){var t=this;this.$nextTick((function(){t.map&&t.map.remove()}))},methods:{testMethod:function(t){var e=this;this.$nextTick((function(){var t,n=Object(i["a"])(e.$children);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.parentMounted&&o.parentMounted(e,o.$props)}}catch(a){n.e(a)}finally{n.f()}}))}}},y=b,x=(n("4b1e"),n("2877")),$=Object(x["a"])(y,o,a,!1,null,null,null);e["default"]=$.exports},"9f0b":function(t,e,n){"use strict";n("d81d");var o=n("5530");e["a"]={methods:{$_emitEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$emit(t,Object(o["a"])({map:this.map,component:this},e))},$_emitMapEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$_emitEvent(t.type,Object(o["a"])({mapboxEvent:t},e))}}}},a9e3:function(t,e,n){"use strict";var o=n("83ab"),a=n("da84"),i=n("94ca"),r=n("6eeb"),c=n("5135"),u=n("c6b6"),s=n("7156"),l=n("c04e"),m=n("d039"),f=n("7c73"),p=n("241c").f,d=n("06cf").f,h=n("9bf2").f,g=n("58a8").trim,v="Number",b=a[v],y=b.prototype,x=u(f(y))==v,$=function(t){var e,n,o,a,i,r,c,u,s=l(t,!1);if("string"==typeof s&&s.length>2)if(s=g(s),e=s.charCodeAt(0),43===e||45===e){if(n=s.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(s.charCodeAt(1)){case 66:case 98:o=2,a=49;break;case 79:case 111:o=8,a=55;break;default:return+s}for(i=s.slice(2),r=i.length,c=0;c<r;c++)if(u=i.charCodeAt(c),u<48||u>a)return NaN;return parseInt(i,o)}return+s};if(i(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var _,O=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof O&&(x?m((function(){y.valueOf.call(n)})):u(n)!=v)?s(new b($(e)),n,O):$(e)},M=o?p(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),B=0;M.length>B;B++)c(b,_=M[B])&&!c(O,_)&&h(O,_,d(b,_));O.prototype=y,y.constructor=O,r(a,v,O)}}}]);
//# sourceMappingURL=pvm_MglMap.js.map