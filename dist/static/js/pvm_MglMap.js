(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pvm_MglMap"],{"24a1":function(t,e,n){},"4b1e":function(t,e,n){"use strict";var o=n("24a1"),i=n.n(o);i.a},"7f84":function(t,e,n){(function(e,n){t.exports=n()})(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e);var o=[{name:"moveend",check:function(t,e){return e.center&&t.isMoving()}},{name:"zoomend",check:function(t,e){return void 0!==e.zoom&&null!==e.zoom&&t.isZooming()}},{name:"rotateend",check:function(t,e){return void 0!==e.bearing&&null!==e.bearing&&t.isRotating()}},{name:"pitchend",check:function(t,e){return void 0!==e.pitch&&null!==e.bearing&&t.isMoving()}}],i=function(t){return{center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch()}},a={events:o,getter:i},r={events:[{name:"moveend",check:function(t){return t.isMoving()}}],getter:function(t){return{center:t.getCenter()}}},c={events:[{name:"zoomend",check:function(t){return t.isZooming()}}],getter:function(t){return{zoom:t.getZoom()}}},u={events:[{name:"rotateend",check:function(t){return t.isRotating()}}],getter:function(t){return{bearing:t.getBearing()}}},s={setCenter:r,panBy:r,panTo:r,setZoom:c,zoomTo:c,zoomIn:c,zoomOut:c,setBearing:u,rotateTo:u,resetNorth:u,snapToNorth:u,setPitch:{events:[{name:"pitchend",check:function(t){return!0}}],getter:function(t){return{pitch:t.getPitch()}}},fitBounds:{events:[{name:"zoomend",check:function(t){return t.isZooming()}},{name:"moveend",check:function(t){return t.isMoving()}},{name:"rotateend",check:function(t){return t.isRotating()}}],getter:function(t){return{zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),center:t.getCenter()}}},fitScreenCoordinates:{events:[{name:"zoomend",check:function(t,e){return t.isZooming()}},{name:"moveend",check:function(t,e){return t.isMoving()}},{name:"rotateend",check:function(t,e){return e.bearing&&t.isRotating()}}],getter:function(t){return{zoom:t.getZoom(),center:t.getCenter(),bearing:t.getBearing(),pitch:t.getPitch()}}},jumpTo:a,easeTo:a,flyTo:a};function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),o.forEach((function(e){p(t,e,n[e])}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){return"".concat(t,"-").concat((""+Math.random()).split(".")[1])}function d(t,e,n,o){var i=function i(a){a.type===e&&a.eventId===n&&(t.off(e,i),o(a))};return i}function h(t,e){var n=t[e],o=n.length;return function(){for(var i=[],a={eventId:f(e)},r=s[e].events.map((function(e,n){return{event:e,func:new Promise((function(o,r){i[n]={event:e,func:d(t,e.name,a.eventId,o)},t.on(e.name,i[n].func)}))}})),c=[],u=0;u<o;u++)u===o-1?c.push(m({},a,(u<0||arguments.length<=u?void 0:arguments[u])||{})):c.push((u<0||arguments.length<=u?void 0:arguments[u])||null);var p=[],h=(arguments.length<=0?void 0:arguments[0])||{};try{n.apply(t,c),"fitBounds"===e&&(h={}),"fitScreenCoordinates"===e&&(h={bearing:null},h.bearing=null,"number"===typeof(arguments.length<=2?void 0:arguments[2])&&(h.bearing=arguments.length<=2?void 0:arguments[2]),(arguments.length<=3?void 0:arguments[3])&&"object"===l(arguments.length<=3?void 0:arguments[3])&&(h=m({},h,arguments.length<=3?void 0:arguments[3]))),p=r.map((function(e){var n=e.event,o=e.func;return n.check(t,h)?o:(t.off(n.name,o),Promise.resolve())}))}catch(g){throw i.forEach((function(e){var n=e.event,o=e.func;t.off(n.name,o)})),g}return Promise.all(p).then((function(){return s[e].getter(t)}))}}var g=h,v=function(t){var e=Object.keys(s),n={};return e.forEach((function(o){-1!==e.indexOf(o)&&(n[o]=g(t,o))})),n};function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?g(t,e):v(t)}n.d(e,"default",(function(){return b}))}])["default"]}))},"818b":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.mapContainerClass+" mgl-map-wrapper",attrs:{id:"map-container"}},[t._m(0),t.initialized?t._t("default"):t._e()],2)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",attrs:{id:t.container}})}],a=(n("d81d"),n("b64b"),n("d3b7"),n("b85c")),r=n("5530"),c=n("9f0b"),u={resize:{name:"resize"},webglcontextlost:{name:"webglcontextlost"},webglcontextrestored:{name:"webglcontextrestored"},remove:{name:"remove"},movestart:{name:"movestart"},load:{name:"load"},contextmenu:{name:"contextmenu"},dblclick:{name:"dblclick"},click:{name:"click"},touchcancel:{name:"touchcancel"},touchmove:{name:"touchmove"},touchend:{name:"touchend"},touchstart:{name:"touchstart"},dataloading:{name:"dataloading"},mousemove:{name:"mousemove"},mouseup:{name:"mouseup"},mousedown:{name:"mousedown"},sourcedataloading:{name:"sourcedataloading"},error:{name:"error"},data:{name:"data"},styledata:{name:"styledata"},sourcedata:{name:"sourcedata"},mouseout:{name:"mouseout"},styledataloading:{name:"styledataloading"},moveend:{name:"moveend"},move:{name:"move"},render:{name:"render"},zoom:{name:"zoom"},zoomstart:{name:"zoomstart"},zoomend:{name:"zoomend"},boxzoomstart:{name:"boxzoomstart"},boxzoomcancel:{name:"boxzoomcancel"},boxzoomend:{name:"boxzoomend"},rotate:{name:"rotate"},rotatestart:{name:"rotatestart"},rotateend:{name:"rotateend"},dragend:{name:"dragend"},drag:{name:"drag"},dragstart:{name:"dragstart"},pitch:{name:"pitch"},idle:{name:"idle"}},s=(n("caad"),n("a9e3"),n("ac1f"),n("1276"),{container:{type:[String,HTMLElement],default:function(){return"map-".concat((""+Math.random()).split(".")[1])}},accessToken:{type:String,default:void 0},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},mapStyle:{type:[String,Object],required:!0},hash:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0},bearingSnap:{type:Number,default:7},pitchWithRotate:{type:Boolean,default:!0},clickTolerance:{type:Number,default:3},attributionControl:{type:Boolean,default:!0},customAttribution:{type:[String,Array],default:null},logoPosition:{type:String,default:"bottom-left",validator:function(t){return["top-left","top-right","bottom-left","bottom-right"].includes(t)}},failIfMajorPerformanceCaveat:{type:Boolean,default:!1},preserveDrawingBuffer:{type:Boolean,default:!1},refreshExpiredTiles:{type:Boolean,default:!0},maxBounds:{type:Array,default:function(){}},scrollZoom:{type:[Boolean,Object],default:function(){return!0}},boxZoom:{type:Boolean,default:!0},dragRotate:{type:Boolean,default:!0},dragPan:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},touchZoomRotate:{type:[Boolean,Object],default:function(){return!0}},trackResize:{type:Boolean,default:!0},center:{type:[Object,Array],default:void 0},zoom:{type:Number,default:0},bearing:{type:Number,default:0},pitch:{type:Number,default:0},bounds:{type:[Object,Array],default:void 0},fitBoundsOptions:{type:Object,default:void 0},renderWorldCopies:{type:Boolean,default:!0},RTLTextPluginUrl:{type:String,default:void 0},light:{type:Object,default:void 0},tileBoundaries:{type:Boolean,default:!1},collisionBoxes:{type:Boolean,default:!1},repaint:{type:Boolean,default:!1},transformRequest:{type:Function,default:null},maxTileCacheSize:{type:Number,default:null},localIdeographFontFamily:{type:String,default:null},collectResourceTiming:{type:Boolean,default:!1},fadeDuration:{type:Number,default:300},crossSourceCollisions:{type:Boolean,default:!0}}),l=(n("4160"),n("4fad"),n("159b"),{maxBounds:function(t){this.map.setMaxBounds(t)},minZoom:function(t){this.map.setMinZoom(t)},maxZoom:function(t){this.map.setMaxZoom(t)},mapStyle:function(t){this.map.setStyle(t)},collisionBoxes:function(t){this.map.showCollisionBoxes=t},tileBoundaries:function(t){this.map.showTileBoundaries=t},repaint:function(t){this.map.repaint=t},zoom:function(t){this.map.setZoom(t)},center:function(t){this.map.setCenter(t)},bearing:function(t){this.map.setBearing(t)},pitch:function(t){this.map.setPitch(t)},light:function(t){this.map.setLigh(t)}});function m(t,e,n,o){var i=this;this.initial||(this.$listeners["update:".concat(t)]?(this.propsIsUpdating[t]?(this._watcher.active=!1,this.$nextTick((function(){i._watcher.active=!0}))):(this._watcher.active=!0,e(n,o)),this.propsIsUpdating[t]=!1):e(n,o))}function p(){var t={};return Object.entries(l).forEach((function(e){t[e[0]]=function(t,n){return m.call(this,e[0],e[1].bind(this),t,n)}})),t}var f={watch:p()},d=(n("2532"),{methods:{$_updateSyncedPropsFabric:function(t,e){var n=this;return function(){n.propsIsUpdating[t]=!0;var o="function"===typeof e?e():e;return n.$emit("update:".concat(t),o)}},$_bindPropsUpdateEvents:function(){var t=this,e=[{events:["moveend"],prop:"center",getter:this.map.getCenter.bind(this.map)},{events:["zoomend"],prop:"zoom",getter:this.map.getZoom.bind(this.map)},{events:["rotate"],prop:"bearing",getter:this.map.getBearing.bind(this.map)},{events:["pitch"],prop:"pitch",getter:this.map.getPitch.bind(this.map)}];e.forEach((function(e){var n=e.events,o=e.prop,i=e.getter;n.forEach((function(e){t.$listeners["update:".concat(o)]&&t.map.on(e,t.$_updateSyncedPropsFabric(o,i))}))}))},$_loadMap:function(){var t=this;return this.mapboxPromise.then((function(e){return t.mapbox=e.default?e.default:e,new Promise((function(e){t.accessToken&&(t.mapbox.accessToken=t.accessToken);var n=new t.mapbox.Map(Object(r["a"])(Object(r["a"])({},t._props),{},{container:t.$refs.container,style:t.mapStyle}));t.$emit("preload",{map:n,component:t}),n.on("load",(function(){e(n)}))}))}))},$_RTLTextPluginError:function(t){this.$emit("rtl-plugin-error",{map:this.map,error:t})},$_bindMapEvents:function(t){var e=this;Object.keys(this.$listeners).forEach((function(n){t.includes(n)&&e.map.on(n,e.$_emitMapEvent)}))},$_unbindEvents:function(t){var e=this;t.forEach((function(t){e.map.off(t,e.$_emitMapEvent)}))}}}),h=n("7f84"),g=n.n(h),v={created:function(){this.actions={}},methods:{$_registerAsyncActions:function(t){this.actions=Object(r["a"])(Object(r["a"])({},g()(t)),{},{stop:function(){var t=this;this.map.stop();var e={pitch:this.map.getPitch(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),center:this.map.getCenter()};return Object.entries(e).forEach((function(e){t.$_updateSyncedPropsFabric(e[0],e[1])()})),Promise.resolve(e)}})}}},b={name:"GlMap",mixins:[f,v,d,c["a"]],props:Object(r["a"])({mapboxGl:{type:Object,default:null}},s),provide:function(){var t=this;return{get mapbox(){return t.mapbox},get map(){return t.map},get actions(){return t.actions}}},data:function(){return{initial:!0,initialized:!1}},computed:{cyclomediaActive:function(){var t;return this.$store.state.cyclomedia&&(t=this.$store.state.cyclomedia.active),t},pictometryActive:function(){var t;return this.$store.state.pictometry&&(t=this.$store.state.pictometry.active),t},picOrCycloActive:function(){return!(!this.cyclomediaActive&&!this.pictometryActive)},mapContainerClass:function(){var t;return this.$config&&(t=!this.picOrCycloActive||"horizontal"!==this.$config.cyclomedia.orientation&&"horizontal"!==this.$config.pictometry.orientation?this.picOrCycloActive?this.$config.map.containerClassWCyclo?this.$config.map.containerClassWCyclo:"height50":this.$config.map.containerClass?this.$config.map.containerClass:"map-container":this.$config.map.containerClassWCyclo?this.$config.map.containerClassWCyclo:"height50"),t},loaded:function(){return!!this.map&&this.map.loaded()},version:function(){return this.map?this.map.version:null},isStyleLoaded:function(){return!!this.map&&this.map.isStyleLoaded()},areTilesLoaded:function(){return!!this.map&&this.map.areTilesLoaded()},isMoving:function(){return!!this.map&&this.map.isMoving()},canvas:function(){return this.map?this.map.getCanvas():null},canvasContainer:function(){return this.map?this.map.getCanvasContainer():null},images:function(){return this.map?this.map.listImages():null}},created:function(){this.map=null,this.propsIsUpdating={},this.mapboxPromise=this.mapboxGl?Promise.resolve(this.mapboxGl):n.e("chunk-2d22497b").then(n.t.bind(null,"e192",7))},mounted:function(){var t=this;console.log("GlMap.vue mounted, this:",this),this.$_loadMap().then((function(e){t.map=e,void 0!==t.RTLTextPluginUrl&&t.mapbox.setRTLTextPlugin(t.RTLTextPluginUrl,t.$_RTLTextPluginError);var n=Object.keys(u);t.$_bindMapEvents(n),t.$_registerAsyncActions(e),t.$_bindPropsUpdateEvents(),t.initial=!1,t.initialized=!0,t.testMethod(e),t.$emit("load",{map:e,component:t})}))},beforeDestroy:function(){var t=this;this.$nextTick((function(){t.map&&t.map.remove()}))},methods:{testMethod:function(t){var e=this;this.$nextTick((function(){var t,n=Object(a["a"])(e.$children);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.parentMounted&&o.parentMounted(e,o.$props)}}catch(i){n.e(i)}finally{n.f()}}))}}},y=b,x=(n("4b1e"),n("2877")),$=Object(x["a"])(y,o,i,!1,null,null,null);e["default"]=$.exports},"9f0b":function(t,e,n){"use strict";n("d81d");var o=n("5530");e["a"]={methods:{$_emitEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$emit(t,Object(o["a"])({map:this.map,component:this},e))},$_emitMapEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$_emitEvent(t.type,Object(o["a"])({mapboxEvent:t},e))}}}}}]);
//# sourceMappingURL=pvm_MglMap.js.map