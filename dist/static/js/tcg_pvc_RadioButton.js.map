{"version":3,"sources":["webpack:///./node_modules/@phila/vue-comps/src/components/RadioButton.vue?6ef7","webpack:///./node_modules/@phila/vue-comps/src/components/LegendBox.vue?b486","webpack:///./node_modules/@phila/vue-comps/src/components/LegendBox.vue?33ff","webpack:///node_modules/@phila/vue-comps/src/components/LegendBox.vue","webpack:///./node_modules/@phila/vue-comps/src/components/LegendBox.vue?2252","webpack:///./node_modules/@phila/vue-comps/src/components/LegendBox.vue","webpack:///./node_modules/@phila/vue-comps/src/components/RadioButton.vue?4ec4","webpack:///node_modules/@phila/vue-comps/src/components/RadioButton.vue","webpack:///./node_modules/@phila/vue-comps/src/components/RadioButton.vue?a454","webpack:///./node_modules/@phila/vue-comps/src/components/RadioButton.vue","webpack:///./node_modules/@phila/vue-comps/src/components/Slider.vue?38de","webpack:///node_modules/@phila/vue-comps/src/components/Slider.vue","webpack:///./node_modules/@phila/vue-comps/src/components/Slider.vue?8f77","webpack:///./node_modules/@phila/vue-comps/src/components/Slider.vue","webpack:///./node_modules/@phila/vue-comps/src/components/Slider.vue?d533"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","legendClass","domProps","_s","legendHtml","staticRenderFns","props","data","options","listTemplate","layerTemplate","listRowTemplate","emptyLabel","container","computed","scale","watch","createLegend","nextScale","legend","console","log","$props","layerId","created","initialize","methods","layerDefinition","drawingInfo","layerName","store","$store","layers","length","layersHtml","L","Util","template","layer","legends","legendsHtml","component","radioButtonClass","staticClass","attrs","bennyId","_e","disabled","shouldBeDisabled","webMapActiveLayers","includes","on","radioToggle","shouldShowDataLink","_v","state","map","computedShouldShowLegendBox","$config","scales","computedShouldShowSlider","opacity","components","TopicComponentGroup","LegendBox","Slider","mixins","opa","Object","keys","shouldShowLegendBox","value","shouldShowSlider","matchingTags","tags","inputTagsFilter","matches","def","minScale","layerUrls","bennyEndpoints","url","shouldShowDataLinks","id","webMapUrlLayer","webMapDisplayedLayers","webMapGeoJson","nextOpacity","commit","payload","nextShouldBeDisabled","removeFromWebMapDisplayedLayers","addToWebMapDisplayedLayers","trim","targetReplace","activeLayers","push","displayedLayers","activeIndex","splice","displayedIndex","urlLayer","index","directives","name","rawName","expression","$event","target"],"mappings":"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","file":"static/js/tcg_pvc_RadioButton.js","sourcesContent":["import mod from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./RadioButton.vue?vue&type=style&index=0&id=0a7cfa27&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./RadioButton.vue?vue&type=style&index=0&id=0a7cfa27&scoped=true&lang=css&\"","import mod from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./LegendBox.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./LegendBox.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{class:_vm.legendClass,domProps:{\"innerHTML\":_vm._s(_vm.legendHtml)}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div\n      :class=\"legendClass\"\n      v-html=\"legendHtml\"\n    />\n  </div>\n</template>\n\n<script>\n\nimport TopicComponent from './TopicComponent.vue';\n\nexport default {\n  props: [ 'layer',\n    'layerName',\n    'layerId',\n    // minScale, maxScale, and drawingInfo are stored in layerDefinition\n    'layerDefinition',\n    'legend',\n    'legendClass',\n    'scales',\n  ],\n  data() {\n    return {\n      legendHtml: '',\n      options: {\n        listTemplate: '<ul>{layers}</ul>',\n        layerTemplate: '<li><ul>{legends}</ul></li>',\n        // layerTemplate: '<li><strong>{layerName}</strong><ul>{legends}</ul></li>',\n        listRowTemplate: '<li><img width=\"{width}\" height=\"{height}\" src=\"data:{contentType};base64,{imageData}\"><span>{label}</span></li>',\n        emptyLabel: '',\n        // emptyLabel: '<all values>',\n        container: null,\n      },\n    };\n  },\n  computed: {\n    scale() {\n      const zoom = this.$store.state.map.zoom;\n      const zoomPlus = zoom + 1;\n      const scale = this.$props.scales[zoomPlus];\n      return scale;\n    },\n  },\n  watch: {\n    scale(nextScale) {\n      this.createLegend(nextScale);\n    },\n    legend() {\n      console.log('METHOD watch props legend fired, this.$props.layerId:', this.$props.layerId);\n      this.createLegend(this.scale);\n    },\n  },\n  created() {\n    this.initialize();\n  },\n  methods: {\n    initialize() {\n      // console.log('LegendBox.vue initialize is runnning, this.$props:', this.$props);\n      if (this.$props.legend) {\n        // console.log('already have a legend')\n        this.createLegend(this.scale);\n        return;\n      }\n      let drawingInfo;\n      if (this.$props.layerDefinition) {\n        drawingInfo = this.$props.layerDefinition.drawingInfo;\n      }\n      const opts = {\n        layerName: this.$props.layerName,\n        layerId: this.$props.layerId,\n        store: this.$store,\n        drawingInfo,\n      };\n      // console.log('METHOD LegendBox initialize is running, this.$props.layerId:', this.$props.layerId, 'opts:', opts, 'L.esri:', L.esri);\n      // const legend = esriLeafletLegend(this.$props.layer, opts);\n      const legend = L.esri.legendControl(this.$props.layer, opts);\n      // const legend = LegendControl(this.$props.layer, opts);\n    },\n    createLegend(scale) {\n      const legend = this.$props.legend;\n      // console.log('METHOD createLegend running, this.$props.layerId:', this.$props.layerId, 'scale:', scale, 'legend:', legend);\n      let layersHtml = '';\n      if (legend.layers.length === 1) {\n        const layer = legend.layers[0];\n        let legendsHtml = '';\n        for (let layerLegend of layer.legend) {\n          const layerLegendJSON = JSON.parse(JSON.stringify(layerLegend));\n          // console.log('layerLegendJSON', layerLegendJSON);\n          if (!layerLegendJSON.label) {\n            layerLegendJSON.label = '';\n          }\n          legendsHtml += L.Util.template(this.options.listRowTemplate, layerLegendJSON);\n        }\n        layersHtml += L.Util.template(this.options.layerTemplate, {\n          layerName: layer.layerName,\n          legends: legendsHtml,\n        });\n      } else {\n        for (let layer of legend.layers) {\n          // console.log('max:', layer.maxScale, 'scale:', scale, 'min:', layer.minScale);\n          let legendsHtml = '';\n          if (parseFloat(scale) > parseFloat(layer.maxScale) && parseFloat(scale) < parseFloat(layer.minScale)) {\n            // console.log('correct!', layer.layerId);\n            for (let layerLegend of layer.legend) {\n              const layerLegendJSON = JSON.parse(JSON.stringify(layerLegend));\n              legendsHtml += L.Util.template(this.options.listRowTemplate, layerLegendJSON);\n            }\n          }\n          layersHtml += L.Util.template(this.options.layerTemplate, {\n            layerName: layer.layerName,\n            legends: legendsHtml,\n          });\n        }\n      }\n\n      const legendHtml = L.Util.template(this.options.listTemplate, {\n        layers: layersHtml,\n      });\n\n      // store calculatedlegendHtml in data\n      this.legendHtml = legendHtml;\n    },\n  },\n};\n</script>\n\n<style>\n\n.legend {\n  margin-left: 10px;\n}\n\nul {\n  list-style: none;\n  margin-left: 0px;\n  margin-bottom: 2px;\n}\n\nul ul {\n  list-style: none;\n  margin-left: 0px;\n}\n\nli {\n  list-style: none;\n}\n\n.street-legend {\n  border: 1px solid rgb(160, 159, 159);\n  padding-left: 5px;\n  padding-top: 5px;\n}\n\n.street-legend li {\n  padding: 5px;\n}\n\n</style>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./LegendBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./LegendBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LegendBox.vue?vue&type=template&id=7052ff13&\"\nimport script from \"./LegendBox.vue?vue&type=script&lang=js&\"\nexport * from \"./LegendBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LegendBox.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.radioButtonClass},[_c('div',{staticClass:\"div-row\"},[(_vm.shouldShowDataLink)?_c('a',{attrs:{\"href\":'http://metadata.phila.gov/#home/representationdetails/' + _vm.bennyId,\"target\":\"_blank\"}},[_c('span',[_c('font-awesome-icon',{staticClass:\"fa-2x\",attrs:{\"icon\":\"info-circle\"}})],1)]):_vm._e(),_c('input',{class:{ disabled: _vm.shouldBeDisabled },attrs:{\"id\":'radio-'+_vm.layerName,\"layerid\":_vm.layerId,\"disabled\":_vm.shouldBeDisabled,\"type\":\"radio\"},domProps:{\"value\":_vm.layerId,\"checked\":_vm.webMapActiveLayers.includes(_vm.layerName)},on:{\"click\":_vm.radioToggle}}),_c('label',{class:{ disabled: _vm.shouldBeDisabled, 'label-text': _vm.shouldShowDataLink, 'label-text-no-datalinks': !_vm.shouldShowDataLink },attrs:{\"for\":'radio-'+_vm.layerName}},[_c('div',{staticClass:\"layer-name\"},[_vm._v(_vm._s(_vm.layerName))])])]),(this.$store.state.map.webMapActiveLayers.includes(_vm.layerName) && _vm.computedShouldShowLegendBox)?_c('legend-box',{attrs:{\"layer\":_vm.layer,\"layer-name\":_vm.layerName,\"layer-id\":_vm.layerId,\"layer-definition\":_vm.layerDefinition,\"legend\":_vm.legend,\"legend-class\":_vm.legendClass,\"scales\":this.$config.map.scales}}):_vm._e(),(this.$store.state.map.webMapActiveLayers.includes(_vm.layerName) && _vm.computedShouldShowSlider)?_c('slider',{attrs:{\"layer\":_vm.layer,\"layer-name\":_vm.layerName,\"layer-id\":_vm.layerId,\"opacity\":_vm.opacity}}):_vm._e(),(this.$store.state.map.webMapActiveLayers.includes(_vm.layerName))?_c('topic-component-group',{attrs:{\"topic-components\":_vm.options.components}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"radioButtonClass\">\n    <div class=\"div-row\">\n      <a\n        v-if=\"shouldShowDataLink\"\n        :href=\"'http://metadata.phila.gov/#home/representationdetails/' + bennyId\"\n        target=\"_blank\"\n      >\n        <span><font-awesome-icon\n          icon=\"info-circle\"\n          class=\"fa-2x\"\n        /></span>\n      </a>\n\n      <input\n        :id=\"'radio-'+layerName\"\n        :value=\"layerId\"\n        :class=\"{ disabled: shouldBeDisabled }\"\n        :layerid=\"layerId\"\n        :checked=\"webMapActiveLayers.includes(layerName)\"\n        :disabled=\"shouldBeDisabled\"\n        type=\"radio\"\n        @click=\"radioToggle\"\n      >\n\n      <label\n        :for=\"'radio-'+layerName\"\n        :class=\"{ disabled: shouldBeDisabled, 'label-text': shouldShowDataLink, 'label-text-no-datalinks': !shouldShowDataLink }\"\n      >\n        <div class=\"layer-name\">{{ layerName }}</div>\n      </label>\n    </div>\n\n    <legend-box\n      v-if=\"this.$store.state.map.webMapActiveLayers.includes(layerName) && computedShouldShowLegendBox\"\n      :layer=\"layer\"\n      :layer-name=\"layerName\"\n      :layer-id=\"layerId\"\n      :layer-definition=\"layerDefinition\"\n      :legend=\"legend\"\n      :legend-class=\"legendClass\"\n      :scales=\"this.$config.map.scales\"\n    />\n\n    <slider\n      v-if=\"this.$store.state.map.webMapActiveLayers.includes(layerName) && computedShouldShowSlider\"\n      :layer=\"layer\"\n      :layer-name=\"layerName\"\n      :layer-id=\"layerId\"\n      :opacity=\"opacity\"\n    />\n\n    <topic-component-group\n      v-if=\"this.$store.state.map.webMapActiveLayers.includes(layerName)\"\n      :topic-components=\"options.components\"\n    />\n  </div>\n</template>\n\n<script>\nimport TopicComponent from './TopicComponent.vue';\nimport TopicComponentGroup from './TopicComponentGroup.vue';\nimport LegendBox from './LegendBox.vue';\nimport Slider from './Slider.vue';\n\nexport default {\n  components: {\n    TopicComponentGroup,\n    LegendBox,\n    Slider,\n  },\n  mixins: [ TopicComponent ],\n  props: [ 'layer',\n    'layerName',\n    'layerId',\n    // minScale, maxScale, and drawingInfo are stored in layerDefinition\n    'layerDefinition',\n    'opacity',\n    'legend',\n    'legendClass',\n    'tags',\n    'topicLayers',\n    'shouldShowDataLinks',\n  ],\n  data() {\n    return {\n      opa: this.$props.opacity * 100,\n    };\n  },\n  computed: {\n    radioButtonClass() {\n      return this.webMapActiveLayers.includes(this.$props.layerName) ? 'main-div-selected' : 'main-div';\n    },\n    computedShouldShowLegendBox() {\n      let value;\n      if (this.$props.options) {\n        if (Object.keys(this.$props.options).includes('shouldShowLegendBox')) {\n          return this.$props.options.shouldShowLegendBox;\n        }\n        value = true;\n      }\n      return value;\n    },\n    computedShouldShowSlider() {\n      if (this.$props.options) {\n        if (Object.keys(this.$props.options).includes('shouldShowSlider')) {\n          return this.$props.options.shouldShowSlider;\n        }\n        return true;\n\n      }\n      return true;\n\n    },\n    matchingTags() {\n      let matches = [];\n      if (this.$props.tags !== null && this.inputTagsFilter !== '') {\n        for (let tag of this.$props.tags) {\n          if (tag.toLowerCase().includes(this.inputTagsFilter.toLowerCase())) {\n            matches.push(tag);\n          }\n        }\n      }\n      return matches;\n    },\n    inputTagsFilter() {\n      return this.$store.state.layers.inputTagsFilter;\n    },\n    scale() {\n      return this.$store.state.map.scale;\n    },\n    shouldBeDisabled() {\n      let value;\n      const def = this.$props.layerDefinition;\n      if (def) {\n        if (def.minScale) {\n          if (this.scale > def.minScale) {\n            value = true;\n            // return true;\n          }\n          value = false;\n          // return false;\n        }\n      } else {\n        value = false;\n        // return false;\n      }\n      return value;\n    },\n    layerUrls() {\n      return this.$store.state.layers.layerUrls;\n    },\n    bennyEndpoints() {\n      return this.$store.state.bennyEndpoints;\n    },\n    url() {\n      return this.layerUrls[this.$props.layerName];\n    },\n    shouldShowDataLink() {\n      if (this.bennyId && this.$props.shouldShowDataLinks) {\n        return true;\n      }\n      return false;\n\n    },\n    bennyId() {\n      if (Object.keys(this.bennyEndpoints).length > 0) {\n        const id = this.bennyEndpoints[this.url];\n        return id;\n      }\n      return ' ';\n\n    },\n    webMapUrlLayer() {\n      return this.$store.state.map.webMapUrlLayer;\n    },\n    webMapActiveLayers() {\n      return this.$store.state.map.webMapActiveLayers;\n    },\n    webMapDisplayedLayers() {\n      return this.$store.state.map.webMapDisplayedLayers;\n    },\n    webMapGeoJson() {\n      return this.$store.state.map.webMapGeoJson;\n    },\n  },\n  watch: {\n    opa(nextOpacity) {\n      const payload = {\n        layerName: this.$props.layerName,\n        opa: nextOpacity/100,\n      };\n      // console.log('OPACITY CHANGED', payload);\n      this.$store.commit('setWebMapLayersOpacity', payload);\n    },\n    shouldBeDisabled(nextShouldBeDisabled) {\n      // console.log('watch shouldBeDisabled is firing:', this.$props.layerName, nextShouldBeDisabled);\n      if (this.webMapActiveLayers.includes(this.$props.layerName) && nextShouldBeDisabled === true) {\n        this.removeFromWebMapDisplayedLayers();\n      } else if (this.webMapActiveLayers.includes(this.$props.layerName) && nextShouldBeDisabled === false) {\n        this.addToWebMapDisplayedLayers();\n      }\n    },\n  },\n  methods: {\n    trim(s) {\n      return ( s || '' ).replace( /^\\s+|\\s+$/g, '' );\n    },\n    radioToggle(e) {\n      // console.log('radioToggle', e.target, e.target.id, e.target.checked, this.$props.topicLayers);\n      const urlLayer = this.webMapUrlLayer;\n      const activeLayers = this.webMapActiveLayers;\n      const displayedLayers = this.webMapDisplayedLayers;\n      const targetReplace = e.target.id.replace('radio-', '');\n\n      let topicLayersKeys = [];\n      for (let topicLayer of this.$props.topicLayers) {\n        topicLayersKeys.push(topicLayer.title);\n      }\n\n      for (let layer of topicLayersKeys) {\n        if (layer === targetReplace) {\n          // console.log('target checked, targetReplace:', targetReplace);\n          activeLayers.push(layer);\n          displayedLayers.push(layer);\n          if (activeLayers.length === 1) {\n            this.$store.commit('setWebMapUrlLayer', layer);\n          }\n        } else {\n          // console.log('target not checked');\n          const activeIndex = activeLayers.indexOf(layer);\n          if (activeIndex >= 0) {\n            activeLayers.splice(activeIndex, 1);\n          }\n          const displayedIndex = displayedLayers.indexOf(layer);\n          if (displayedIndex >= 0) {\n            displayedLayers.splice(displayedIndex, 1);\n          }\n          if (urlLayer === layer) {\n            this.$store.commit('setWebMapUrlLayer', null);\n          }\n        }\n      }\n      this.$store.commit('setWebMapActiveLayers', activeLayers);\n      this.$store.commit('setWebMapDisplayedLayers', displayedLayers);\n    },\n    removeFromWebMapDisplayedLayers() {\n      const displayedLayers = this.webMapDisplayedLayers;\n      const index = displayedLayers.indexOf(this.$props.layerName);\n      if (index >= 0) {\n        displayedLayers.splice(index, 1);\n      }\n      this.$store.commit('setWebMapDisplayedLayers', displayedLayers);\n    },\n    addToWebMapDisplayedLayers() {\n      const displayedLayers = this.webMapDisplayedLayers;\n      displayedLayers.push(this.$props.layerName);\n      this.$store.commit('setWebMapDisplayedLayers', displayedLayers);\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n  .main-div-selected {\n    padding-bottom: 20px;\n  }\n\n  .sliderDiv {\n    height: 60px;\n  }\n\n  .flex {\n    margin-bottom: 16px;\n  }\n\n  .metadata-link {\n    display: inline-block;\n    height: 10px;\n    width: 10px;\n    /*border: solid;\n    border-width: 1px;*/\n  }\n\n  .download-select {\n    width: 200px;\n  }\n\n  .div-row {\n    position: relative;\n    margin-bottom: 12px;\n  }\n\n  a {\n    position: absolute;\n    /* top: 50%; */\n    /* margin-top: -10px; */\n    /*margin-left: 25px;*/\n  }\n\n  input[type=radio]+label[for] {\n    font-size: 16px;\n  }\n\n  input[type=radio]+label::before {\n    position: absolute;\n    margin-left: 5px;\n    margin-top: 1px;\n    font-size: 14px;\n    padding-right: 5px;\n  }\n\n  .disabled {\n    color: #d3d3d3 !important;\n  }\n\n  input[type=radio]+label.disabled::before {\n    color: #d3d3d3;\n  }\n\n  .label-text-no-datalinks {\n    /* position: absolute; */\n    display: inline-block;\n    /* margin-top: 4px; */\n    margin-left: 0px;\n  }\n\n  .label-text {\n    /* position: absolute; */\n    display: inline-block;\n    /* margin-top: 4px; */\n    margin-left: 0px;\n    padding-left: 30px;\n  }\n\n  .layer-name {\n    font-weight: normal;\n    vertical-align: middle;\n    display: inline-block;\n    margin-left: 30px;\n    margin-bottom: 6px;\n  }\n\n  .tag-title {\n    padding-left: 30px;\n    font-weight: normal;\n    font-style: italic;\n    font-size: 14px;\n    color: red;\n  }\n\n  .tag-holder {\n    /* display: inline-block; */\n    padding-left: 30px;\n    font-weight: normal;\n    font-size: 14px;\n    color: red;\n  }\n\n\n</style>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./RadioButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./RadioButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RadioButton.vue?vue&type=template&id=0a7cfa27&scoped=true&\"\nimport script from \"./RadioButton.vue?vue&type=script&lang=js&\"\nexport * from \"./RadioButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RadioButton.vue?vue&type=style&index=0&id=0a7cfa27&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a7cfa27\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"slider-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.opa),expression:\"opa\"}],staticClass:\"slider\",attrs:{\"type\":\"range\",\"min\":\"1\",\"max\":\"100\",\"step\":\"1\"},domProps:{\"value\":(_vm.opa)},on:{\"__r\":function($event){_vm.opa=$event.target.value}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"slider-wrapper\">\n    <input \n      v-model=\"opa\"\n      class=\"slider\"\n      type=\"range\"\n      min=\"1\"\n      max=\"100\"\n      step=\"1\"\n    >\n  </div>\n</template>\n\n<script>\nimport TopicComponent from './TopicComponent.vue';\n\nexport default {\n  props: [ 'layer',\n    'layerName',\n    'layerId',\n    'opacity',\n  ],\n  data() {\n    return {\n      opa: this.$props.opacity * 100,\n    };\n  },\n  computed: {\n\n  },\n  watch: {\n    opa(nextOpacity) {\n      const payload = {\n        layerName: this.$props.layerName,\n        opa: nextOpacity/100,\n      };\n      // console.log('OPACITY CHANGED', payload);\n      this.$store.commit('setWebMapLayersOpacity', payload);\n    },\n  },\n  created() {\n    // this.initialize();\n  },\n  methods: {\n\n  },\n};\n</script>\n\n<style>\n\n.slider-wrapper {\n  /*display: inline-block;*/\n  width: 250px;\n  /*height: 50px;*/\n  /*padding-top: 3px;\n  margin-bottom: 8px;*/\n}\n\n.slider-wrapper input {\n  /*padding-top: 3px;\n  padding-bottom: 8px;\n  margin-bottom: 8px;*/\n  width: 250px;\n  /*height: 20px;*/\n}\n\n</style>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Slider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Slider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Slider.vue?vue&type=template&id=fed89d90&\"\nimport script from \"./Slider.vue?vue&type=script&lang=js&\"\nexport * from \"./Slider.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Slider.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Slider.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Slider.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}