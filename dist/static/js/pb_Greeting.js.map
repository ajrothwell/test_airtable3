{"version":3,"sources":["webpack:///./node_modules/@phila/pinboard/src/components/Greeting.vue?10f6","webpack:///./node_modules/@phila/pinboard/src/components/Greeting.vue?5a02","webpack:///node_modules/@phila/pinboard/src/components/Greeting.vue","webpack:///./node_modules/@phila/pinboard/src/components/Greeting.vue?5f69","webpack:///./node_modules/@phila/pinboard/src/components/Greeting.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_e","addressAutocompleteEnabled","shouldShowAddressInput","domProps","_s","$t","nativeOn","$event","$emit","components","hasError","i18nEnabled","message","errorMessage","attrs","options","item","_l","topicComp","type","key","tag","slots","staticRenderFns","name","PhilaButton","callout","Image_","AddressInput","AddressCandidateList","TopicComponentGroup","mixins","props","String","default","data","sections","subsections","computed","$config","i18n","enabled","calloutOptions","calloutSlots","text","database","$store","state","sources","$appType","rows","features","addressInputLocation","addressInput","autocompleteEnabled","greetingConfig","geocode","status","watch","commit","mounted","methods","getCounts","refineData","forEach","arrayElem","services_offered","service","serviceArray","map","acc","curr","countObject","component"],"mappings":"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","file":"static/js/pb_Greeting.js","sourcesContent":["import mod from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Greeting.vue?vue&type=style&index=0&id=d2f81412&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Greeting.vue?vue&type=style&index=0&id=d2f81412&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"grid-y custom-greeting\"},[(_vm.shouldShowAddressInput)?_c('address-input'):_vm._e(),(_vm.addressAutocompleteEnabled && _vm.shouldShowAddressInput)?_c('address-candidate-list'):_vm._e(),_c('div',{staticClass:\"open-list-div\"},[_c('phila-button',{staticClass:\"button open-list-button\",domProps:{\"innerHTML\":_vm._s(_vm.$t('app.viewList'))},nativeOn:{\"click\":function($event){return _vm.$emit('view-list')}}})],1),_c('div',{staticClass:\"main-area\"},[(!_vm.components && !_vm.hasError && _vm.i18nEnabled)?_c('div',{staticClass:\"greeting\",domProps:{\"innerHTML\":_vm._s(_vm.$t('greeting'))}}):_vm._e(),(!_vm.components && !_vm.hasError && !_vm.i18nEnabled)?_c('div',{staticClass:\"greeting\",domProps:{\"innerHTML\":_vm._s(_vm.message)}}):_vm._e(),(!_vm.components && _vm.hasError)?_c('div',{staticClass:\"greeting greeting-error\",domProps:{\"innerHTML\":_vm._s(_vm.errorMessage)}}):_vm._e(),_c('topic-component-group',{attrs:{\"topic-components\":_vm.options.components,\"item\":_vm.item}}),_vm._l((_vm.components),function(topicComp){return (_vm.components)?_c(topicComp.type,{key:topicComp.type,tag:\"component\",staticClass:\"topic-comp\",attrs:{\"slots\":topicComp.slots}}):_vm._e()})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"grid-y custom-greeting\"\n  >\n    <!-- <div class=\"exclamation-holder\">\n      <font-awesome-icon\n        icon=\"exclamation-triangle\"\n        class=\"fa-3x fa-icon-class\"\n      />\n      <div\n        class=\"grid-y exclamation-details small-19 medium-20\"\n      >\n        <div><b>{{ $t('beforeYouGo') }}:</b></div>\n        <div>{{ $t('checkSite') }}</div>\n      </div>\n    </div> -->\n    <address-input v-if=\"shouldShowAddressInput\" />\n    <address-candidate-list v-if=\"addressAutocompleteEnabled && shouldShowAddressInput\" />\n\n    <div class=\"open-list-div\">\n      <!-- class=\"button open-list-button hide-for-medium\" -->\n      <phila-button\n        class=\"button open-list-button\"\n        @click.native=\"$emit('view-list')\"\n        v-html=\"$t('app.viewList')\"\n      />\n    </div>\n\n    <div\n      class=\"main-area\"\n    >\n\n    <div\n      v-if=\"!components && !hasError && i18nEnabled\"\n      class=\"greeting\"\n      v-html=\"$t('greeting')\"\n    />\n\n    <div\n      v-if=\"!components && !hasError && !i18nEnabled\"\n      class=\"greeting\"\n      v-html=\"message\"\n    />\n\n    <div\n      v-if=\"!components && hasError\"\n      class=\"greeting greeting-error\"\n      v-html=\"errorMessage\"\n    />\n\n    <topic-component-group\n      :topic-components=\"options.components\"\n      :item=\"item\"\n    />\n\n    <component\n      :is=\"topicComp.type\"\n      v-for=\"(topicComp) in components\"\n      v-if=\"components\"\n      :key=\"topicComp.type\"\n      :slots=\"topicComp.slots\"\n      class=\"topic-comp\"\n    />\n      <!-- <h1>\n        {{ $t('introPage.introTitle') }}\n      </h1>\n      <p\n        v-html=\"$t('introPage.p1')\"\n      />\n      <ul>\n        <li\n          v-for=\"(item, index) in $config.i18n.data.messages['en-US'].introPage.ul1\"\n          :key=\"index\"\n        >\n          {{ $t('introPage.ul1.' + index) }}\n        </li>\n      </ul>\n      <h2>\n        {{ $t('introPage.section1Title') }}\n      </h2>\n      <p>\n        {{ $t('introPage.p2') }}\n      </p>\n      <ul>\n        <li\n          v-for=\"(item, index) in $config.i18n.data.messages['en-US'].introPage.ul2\"\n          :key=\"index\"\n        >\n          {{ $t('introPage.ul2.' + index) }}\n        </li>\n      </ul>\n      <p>\n        {{ $t('introPage.p3') }}\n      </p>\n      <div\n        class=\"custom-callout\"\n      >\n        <p\n          class=\"no-margin\"\n          v-html=\"$t('introPage.callout1.p1')\"\n        />\n      </div> -->\n    </div> <!-- end of main-area -->\n  </div>\n</template>\n\n<script>\n\nimport TopicComponent from '@phila/vue-comps/src/components/TopicComponent.vue';\nimport PhilaButton from './PhilaButton.vue';\nimport callout from '@phila/vue-comps/src/components/Callout.vue';\n\nexport default {\n  name: 'Greeting',\n  components: {\n    PhilaButton,\n    callout,\n    Image_: () => import(/* webpackChunkName: \"inGreeting_pvc_Image\" */'@phila/vue-comps/src/components/Image.vue'),\n    AddressInput: () => import(/* webpackChunkName: \"inGreeting_pvc_AddressInput\" */'@phila/vue-comps/src/components/AddressInput.vue'),\n    AddressCandidateList: () => import(/* webpackChunkName: \"inGreeting_pvc_AddressCandidateList\" */'@phila/vue-comps/src/components/AddressCandidateList.vue'),\n    TopicComponentGroup: () => import(/* webpackChunkName: \"inGreeting_pvc_TopicComponentGroup\" */'@phila/vue-comps/src/components/TopicComponentGroup.vue'),\n  },\n  mixins: [ TopicComponent ],\n  props: {\n    'message': {\n      type: String,\n      default: function() {\n        return 'defaultMessage';\n      },\n    },\n  },\n  data() {\n    let data = {\n      sections: {},\n      subsections: {},\n    };\n    return data;\n  },\n  computed: {\n    i18nEnabled() {\n      if (this.$config.i18n && this.$config.i18n.enabled) {\n        return true;\n      }\n      return false;\n\n    },\n    calloutOptions() {\n      return {};\n    },\n    calloutSlots() {\n      return {\n        text: 'test',\n      };\n    },\n    database() {\n      if (this.$store.state.sources[this.$appType].data) {\n        return this.$store.state.sources[this.$appType].data.rows || this.$store.state.sources[this.$appType].data.features || this.$store.state.sources[this.$appType].data;\n      }\n      return [];\n\n    },\n    shouldShowAddressInput() {\n      if (this.$config.addressInputLocation == 'topics') {\n        return true;\n      }\n      return false;\n\n    },\n    addressAutocompleteEnabled() {\n      // TODO tidy up the code\n      if (this.$config.addressInput) {\n        if (this.$config.addressInput.autocompleteEnabled === true) {\n          return true;\n        }\n        return false;\n\n      }\n      return false;\n\n    },\n    components() {\n      const greetingConfig = this.$config.greeting || {};\n      // console.log('Greeting.vue computing components');\n      let components;\n      if (greetingConfig) {\n        // console.log('Greeting.vue inside if, greetingConfig:', greetingConfig);\n        components = greetingConfig.components;\n      }\n      return components;\n    },\n    hasError() {\n      return this.$store.state.geocode.status === 'error';\n    },\n    errorMessage() {\n      const input = this.$store.state.geocode.input;\n      return `\n          <p>\n            We couldn't find\n            ${input ? '<strong>' + input + '</strong>' : 'that address'}.\n            Are you sure everything was spelled correctly?\n          </p>\n          <p>\n            Here are some examples of things you can search for:\n          </p>\n          <ul>\n            <li>1234 Market St</li>\n            <li>1001 Pine Street #201</li>\n            <li>12th & Market</li>\n            <li>883309050 (an OPA number with no hyphens or other characters)</li>\n          </ul>\n        `;\n    },\n  },\n  watch: {\n    database() {\n      let subsections = this.getCounts();\n      this.subsections = subsections;\n      this.$store.commit('setSubsections', subsections);\n    },\n  },\n  mounted() {\n    this.sections = this.$config.sections;\n  },\n  methods: {\n    getCounts() {\n      // console.log('customGreeting.vue getCounts is running');\n      const refineData = this.database;\n      // const refineData = this.sources[this.$appType].data.rows;\n\n      let service = '';\n\n      // console.log('in getRefineSearchList, refineData:', refineData);\n      refineData.forEach((arrayElem) => {\n        // console.log('arrayElem:', arrayElem);\n        if (arrayElem.services_offered) {\n          service += `${arrayElem.services_offered},`;\n        } else if (arrayElem.attributes.CATEGORY) {\n          service += `${arrayElem.attributes.CATEGORY},`;\n        }\n      });\n\n      // TODO: break this into smaller chunks\n      // let serviceArray = service.split(/(,|;)/);\n      let serviceArray = service.split(',');\n      serviceArray = serviceArray.map(s => s.trim());\n\n      // const uniqArray = [ ...new Set(serviceArray) ];\n      // console.log('serviceArray:', serviceArray, 'uniqArray:', uniqArray);\n      //\n      // // clean up any dangling , or ;\n      // let uniq = uniqArray.filter(a => a.length > 2);\n      //\n      // uniq.filter(Boolean); // remove empties\n\n      let countObject = serviceArray.reduce(function (acc, curr) {\n        if (typeof acc[curr] == 'undefined') {\n          acc[curr] = 1;\n        } else {\n          acc[curr] += 1;\n        }\n        return acc;\n      }, {});\n\n      return countObject;\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n  h1 {\n    font-size: 20px;\n  }\n\n  h2 {\n    font-size: 16px;\n  }\n\n  .main-area {\n    padding: 10px;\n  }\n\n  .custom-callout {\n    border-style: solid;\n    border-width: 1px;\n    padding: 10px;\n  }\n\n  .no-margin {\n    margin: 0px;\n  }\n\n  .open-list-div {\n    margin: 0 auto;\n  }\n\n  .open-list-button {\n    margin-top: 6px;\n    margin-bottom: 14px;\n    width: 200px;\n  }\n\n  .custom-greeting {\n    padding: 12px;\n  }\n\n  .exclamation-holder {\n    display: flex;\n    align-items: center;\n    margin-top: 6px;\n    margin-bottom: 14px;\n  }\n\n  .fa-icon-class {\n    margin: 0 auto;\n    display: block;\n  }\n\n  .exclamation-details {\n    margin-left: 14px;\n    font-size: 14px;\n  }\n\n  .mb-panel-topics-greeting {\n    padding-top: 20px;\n  }\n\n  .greeting {\n    font-size: 20px;\n    color: #444;\n    padding: 14px;\n  }\n\n  .greeting-error {\n    border-left-color: #ff0000;\n  }\n\n  .custom-section {\n    margin-left: 8px;\n    margin-top: 4px;\n  }\n\n  .custom-ul {\n    margin-left: 4rem;\n    font-size: 14px;\n  }\n\n  /*medium*/\n  @media screen and (min-width: 750px) {\n    .mb-panel-topics-greeting {\n      /*make this scroll on medium screens*/\n      /*REVIEW this is a little hacky. the 120px shouldn't be hard-coded.*/\n      height: calc(100vh - 120px);\n      overflow: auto;\n    }\n  }\n</style>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Greeting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./Greeting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Greeting.vue?vue&type=template&id=d2f81412&scoped=true&\"\nimport script from \"./Greeting.vue?vue&type=script&lang=js&\"\nexport * from \"./Greeting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Greeting.vue?vue&type=style&index=0&id=d2f81412&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d2f81412\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}