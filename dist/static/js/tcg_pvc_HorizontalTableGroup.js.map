{"version":3,"sources":["webpack:///./node_modules/@phila/vue-comps/src/components/HorizontalTableGroup.vue?5991","webpack:///./node_modules/@phila/vue-comps/src/components/HorizontalTableGroup.vue?9ee4","webpack:///node_modules/@phila/vue-comps/src/components/HorizontalTableGroup.vue","webpack:///./node_modules/@phila/vue-comps/src/components/HorizontalTableGroup.vue?601b","webpack:///./node_modules/@phila/vue-comps/src/components/HorizontalTableGroup.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","$props","options","filters","staticClass","_l","filter","index","key","attrs","_v","_s","label","on","handleFilterValueChange","filterValue","filterIndex","domProps","slugifyFilterValue","_e","table","directives","name","rawName","value","shouldShowTable","id","expression","tableGroupData","slots","staticRenderFns","components","HorizontalTable","mixins","data","horizontalTableGroupId","computed","altMainTable","alternate","mainTable","altDepTable","dependentTable","created","sources","dataSource","activeTable","activeTableId","$store","commit","showBoth","methods","result","deslugifyFilterValue","tableName","component"],"mappings":"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","file":"static/js/tcg_pvc_HorizontalTableGroup.js","sourcesContent":["import mod from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./HorizontalTableGroup.vue?vue&type=style&index=0&id=27ee74b4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./HorizontalTableGroup.vue?vue&type=style&index=0&id=27ee74b4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!!this.$props.options.filters)?_c('div',{staticClass:\"mb-horizontal-table-controls\"},_vm._l((this.$props.options.filters),function(filter,index){return _c('div',{key:index,staticClass:\"inline-block\",attrs:{\"id\":'filter-' + index}},[_c('div',{staticClass:\"vertically-centered mb-select-text\"},[_vm._v(\" \"+_vm._s(filter.label)+\" \")]),_c('select',{staticClass:\"mb-select\",on:{\"change\":_vm.handleFilterValueChange}},[_c('optgroup',_vm._l((filter.values),function(filterValue,filterIndex){return _c('option',{key:filterIndex,staticClass:\"mb-select-option\",domProps:{\"value\":_vm.slugifyFilterValue(filterValue)}},[_vm._v(\" \"+_vm._s(filterValue.label)+\" \")])}),0)])])}),0):_vm._e(),_vm._l((_vm.options.tables),function(table,index){return _c('horizontal-table',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shouldShowTable(table.options.id)),expression:\"shouldShowTable(table.options.id)\"}],key:index,attrs:{\"item\":_vm.tableGroupData,\"options\":table.options,\"slots\":table.slots}})})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div\n      v-if=\"!!this.$props.options.filters\"\n      class=\"mb-horizontal-table-controls\"\n    >\n      <div\n        v-for=\"(filter, index) in this.$props.options.filters\"\n        :id=\"'filter-' + index\"\n        :key=\"index\"\n        class=\"inline-block\"\n      >\n        <div class=\"vertically-centered mb-select-text\">\n          {{ filter.label }}\n        </div>\n        <select\n          class=\"mb-select\"\n          @change=\"handleFilterValueChange\"\n        >\n          <optgroup>\n            <option\n              v-for=\"(filterValue, filterIndex) in filter.values\"\n              :key=\"filterIndex\"\n              :value=\"slugifyFilterValue(filterValue)\"\n              class=\"mb-select-option\"\n            >\n              {{ filterValue.label }}\n            </option>\n          </optgroup>\n        </select>\n      </div>\n    </div>\n    <horizontal-table\n      v-for=\"(table, index) in options.tables\"\n      v-show=\"shouldShowTable(table.options.id)\"\n      :key=\"index\"\n      :item=\"tableGroupData\"\n      :options=\"table.options\"\n      :slots=\"table.slots\"\n    />\n    <!-- <topic-component-group :topic-components=\"options.components\" :item=\"item\" /> -->\n  </div>\n</template>\n\n<script>\nimport TopicComponent from './TopicComponent.vue';\n// import HorizontalTable from './HorizontalTable.vue';\n// import TopicComponentGroup from '../TopicComponentGroup.vue';\n\nexport default {\n  components: {\n    // HorizontalTable,\n    HorizontalTable: () => import(/* webpackChunkName: \"htg_pvc_HorizontalTable\" */'./HorizontalTable.vue'),\n    // TopicComponentGroup\n  },\n  // name: 'HorizontalTableGroup',\n  mixins: [ TopicComponent ],\n  // some internal state for things local enough that they shouldn't be in\n  // vuex if we can avoid it.\n  data() {\n    const tableGroupData = {\n      'tableGroupId': this.options.horizontalTableGroupId,\n      'activeTable': null,\n      'activeTableId': null,\n    };\n      // return {\n      //   horizontalTableGroupId: this.options.horizontalTableGroupId,\n      //   activeTable: null,\n      //   activeTableId: null,\n      // };\n    return {\n      tableGroupData,\n    };\n  },\n  computed: {\n    altMainTable() {\n      if (this.options.alternate) {\n        return this.options.alternate.mainTable;\n      }\n      return null;\n\n    },\n    altDepTable() {\n      if (this.options.alternate) {\n        return this.options.alternate.dependentTable;\n      }\n      return null;\n\n    },\n  },\n  created() {\n    // console.log('horizontalTableGroup created is starting, this.tableGroupData:', this.tableGroupData);\n    if (this.options.filters) {\n      // console.log('horizontalTableGroup created, if this.options.filters is running:', this.options.filters, this.options.filters.entries());\n      for (let filter of this.options.filters) {\n        // for (let [index, filter] of this.options.filters.entries()) {\n        // console.log('for loop, this.options.filters:', this.options.filters[0]);\n        // let filter = this.options.filters[0]\n        // for (let [index, filter] of this.options.filters.entries()) {\n        // console.log('for loop, filter:', filter);\n        // console.log('for loop, index:', index, 'filter:', filter);\n        const defaultTableName = filter.values[0].value || {};\n        // console.log('for loop, defaultTableName:', defaultTableName);\n\n        // add activeTable to local data\n        this.tableGroupData.activeTable = defaultTableName;\n        // add activeTableId to local data\n        // console.log('for loop, this.options.components:', this.options.components);\n        for (let comp of this.options.tables) {\n          if (comp.options.id === defaultTableName) {\n            this.tableGroupData.activeTableId = comp._id;\n          }\n        }\n        // console.log('horizontalTableGroup this.tableGroupData:', this.tableGroupData);\n        this.$store.commit('setHorizontalTableGroupActiveTable', this.tableGroupData);\n        // this.$store.commit('setHorizontalTableGroupActiveTableId', this.activeTable);\n      }\n      // console.log('horizontalTableGroup created, if this.options.filters is ending');\n    }\n    if (this.options.alternate) {\n      // console.log('horizontalTableGroup created, if this.options.alternate - mainTable', this.options.alternate.mainTable, this.altMainTable, 'dependentTable', this.options.alternate.dependentTable, this.altDepTable);\n      const sources = this.$store.state.sources;\n      // console.log('Tablegroup source check dep', sources[this.altDepTable.dataSource].data);\n      // console.log('Tablegroup source check main', sources[this.altMainTable.dataSource].data);\n      if (sources[this.altDepTable.dataSource].data && !sources[this.altMainTable.dataSource].data) {\n        // console.log('Tablegroup there is a dep table, and not a main table');\n        this.activeTable = this.altDepTable.id;\n        this.activeTableId = 'aaa';\n        this.$store.commit('setHorizontalTableGroupActiveTable', this.tableGroupData);\n        // this.$store.commit('setHorizontalTableGroupActiveTableId', this.activeTable);\n      } else if (sources[this.altMainTable.dataSource].data) {\n        this.activeTable = this.altMainTable.id;\n        this.activeTableId = 'bbb';\n        this.$store.commit('setHorizontalTableGroupActiveTable', this.tableGroupData);\n        // this.$store.commit('setHorizontalTableGroupActiveTableId', this.activeTable);\n      }\n    }\n    if (this.options.showBoth) {\n      // console.log('tableGroup showBoth');\n    }\n  },\n  methods: {\n    shouldShowTable(id) {\n      let result = true;\n\n      // if the table is in a tab group or table group, it will have an \"item\" in props\n      // if (this.item) {\n      // if it is in a table group, the item will contain an \"activeTable\" for the group\n      // if (this.activeTable) {\n      // const id = this.options.id;\n      if (this.tableGroupData.activeTable != id) {\n        result = false;\n      }\n      // }\n      // }\n      // if there is no data, and the table should not show at all if it is empty\n      // if (this.options.showOnlyIfData && this.tableGroupData.length === 0) {\n      //   result = false;\n      // }\n\n      return result;\n    },\n    slugifyFilterValue(filterValue) {\n      const { direction, value, unit } = filterValue;\n      return [ direction, value, unit ].join('-');\n    },\n    deslugifyFilterValue(slug) {\n      const parts = slug.split('-');\n      const [ direction, value, unit ] = parts;\n      return { value, unit, direction };\n    },\n    handleFilterValueChange(e) {\n      // console.log('handle activeTable value change', e);\n      const target = e.target;\n      const slug = target.value;\n      // deslugify filter value\n      const valueObj = this.deslugifyFilterValue(slug);\n      const tableName = valueObj.value;\n\n      // add activeTable to local data\n      this.tableGroupData.activeTable = tableName;\n\n      // add activeTableId to local data\n      for (let comp of this.options.tables) {\n        // console.log('tableName:', tableName, 'comp.options.id:', comp.options.id, 'comp:', comp);\n        if (comp.options.id === tableName) {\n          this.tableGroupData.activeTableId = comp._id;\n        }\n      }\n\n      // console.log('handleFilterValueChange, this.tableGroupData:', this.tableGroupData);\n      this.$store.commit('setHorizontalTableGroupActiveTable', this.tableGroupData);\n      // this.$store.commit('setHorizontalTableGroupActiveTableId', this.activeTable);\n    },\n  },\n};\n</script>\n\n<style scoped>\n  .tabs-panel {\n    padding: 20px;\n  }\n\n  .inline-block {\n    display: inline-block;\n  }\n\n  .vertically-centered {\n    display: inline-block;\n    vertical-align: middle;\n  }\n\n  .mb-horizontal-table-controls {\n    text-align: center;\n    vertical-align: middle;\n    margin-bottom: 10px;\n  }\n\n  /* dropdown filters */\n  .mb-select-text {\n    font-size: 16px;\n    padding-right: 5px;\n    padding-left: 5px;\n  }\n\n  .mb-select {\n    width: auto;\n    height: 40px;\n    vertical-align: middle;\n    /*padding-right: 20px;*/\n  }\n\n  .mb-select-option {\n    display: inline-block;\n    padding-right: 100px;\n    margin-right: 100px;\n  }\n</style>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./HorizontalTableGroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./HorizontalTableGroup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HorizontalTableGroup.vue?vue&type=template&id=27ee74b4&scoped=true&\"\nimport script from \"./HorizontalTableGroup.vue?vue&type=script&lang=js&\"\nexport * from \"./HorizontalTableGroup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HorizontalTableGroup.vue?vue&type=style&index=0&id=27ee74b4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"27ee74b4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}