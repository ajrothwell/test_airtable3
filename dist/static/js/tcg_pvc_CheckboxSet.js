(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tcg_pvc_CheckboxSet","tcg_pvc_Checkbox","tcg_pvc_LegendBox","tcg_pvc_Slider"],{"100b":function(e,t,a){},"3d6c":function(e,t,a){"use strict";var s=a("e50b"),i=a.n(s);i.a},4166:function(e,t,a){"use strict";var s=a("fe9d"),i=a.n(s);i.a},"5b50":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{class:e.legendClass,domProps:{innerHTML:e._s(e.legendHtml)}})])},i=[],r=(a("d81d"),a("b85c")),n=(a("f076"),{props:["layer","layerName","layerId","layerDefinition","legend","legendClass","scales"],data:function(){return{legendHtml:"",options:{listTemplate:"<ul>{layers}</ul>",layerTemplate:"<li><ul>{legends}</ul></li>",listRowTemplate:'<li><img width="{width}" height="{height}" src="data:{contentType};base64,{imageData}"><span>{label}</span></li>',emptyLabel:"",container:null}}},computed:{scale:function(){var e=this.$store.state.map.zoom,t=e+1,a=this.$props.scales[t];return a}},watch:{scale:function(e){this.createLegend(e)},legend:function(){console.log("METHOD watch props legend fired, this.$props.layerId:",this.$props.layerId),this.createLegend(this.scale)}},created:function(){this.initialize()},methods:{initialize:function(){if(this.$props.legend)this.createLegend(this.scale);else{var e;this.$props.layerDefinition&&(e=this.$props.layerDefinition.drawingInfo);var t={layerName:this.$props.layerName,layerId:this.$props.layerId,store:this.$store,drawingInfo:e};L.esri.legendControl(this.$props.layer,t)}},createLegend:function(e){var t=this.$props.legend,a="";if(1===t.layers.length){var s,i=t.layers[0],n="",o=Object(r["a"])(i.legend);try{for(o.s();!(s=o.n()).done;){var l=s.value,c=JSON.parse(JSON.stringify(l));c.label||(c.label=""),n+=L.Util.template(this.options.listRowTemplate,c)}}catch(v){o.e(v)}finally{o.f()}a+=L.Util.template(this.options.layerTemplate,{layerName:i.layerName,legends:n})}else{var p,d=Object(r["a"])(t.layers);try{for(d.s();!(p=d.n()).done;){var u=p.value,h="";if(parseFloat(e)>parseFloat(u.maxScale)&&parseFloat(e)<parseFloat(u.minScale)){var y,f=Object(r["a"])(u.legend);try{for(f.s();!(y=f.n()).done;){var m=y.value,g=JSON.parse(JSON.stringify(m));h+=L.Util.template(this.options.listRowTemplate,g)}}catch(v){f.e(v)}finally{f.f()}}a+=L.Util.template(this.options.layerTemplate,{layerName:u.layerName,legends:h})}}catch(v){d.e(v)}finally{d.f()}}var b=L.Util.template(this.options.listTemplate,{layers:a});this.legendHtml=b}}}),o=n,l=(a("3d6c"),a("2877")),c=Object(l["a"])(o,s,i,!1,null,null,null);t["default"]=c.exports},"6eea":function(e,t,a){},8704:function(e,t,a){"use strict";var s=a("100b"),i=a.n(s);i.a},ae0c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{attrs:{action:"#/"}},[a("fieldset",{staticClass:"options"},e._l(e.currentWmLayers,(function(t){return a("checkbox",{key:t.id,attrs:{layer:t.layer,"layer-name":t.title,"layer-id":t.id,"layer-definition":t.rest.layerDefinition,opacity:t.opacity,legend:t.legend,"should-show-data-links":e.computedShouldShowDataLinks,options:t.options}})})),1)])])},i=[],r=(a("4de4"),a("caad"),a("a15b"),a("d81d"),a("b64b"),a("2532"),a("b85c")),n=a("f076"),o=a("c045"),l={components:{Checkbox:o["default"]},mixins:[n["a"]],computed:{categories:function(){return this.$store.state.map.categories},selectedCategory:function(){return this.$store.state.map.selectedCategory},scale:function(){return this.$store.state.map.scale},computedShouldShowDataLinks:function(){var e;return e=!Object.keys(this.$props.options).includes("shouldShowDataLinks")||this.$props.options.shouldShowDataLinks,e},topicLayers:function(){if(this.$props.options.topicLayers)return this.$props.options.topicLayers;var e,t=[],a=Object(r["a"])(this.$store.state.map.webMapLayersAndRest);try{for(a.s();!(e=a.n()).done;){var s=e.value;t.push({title:s.title})}}catch(i){a.e(i)}finally{a.f()}return t},activeLayers:function(){return this.$store.state.map.webMapActiveLayers},currentWmLayers:function(){var e,t=this.$store.state.map.webMapLayersAndRest,a=this.topicLayers,s=[],i=Object(r["a"])(a);try{for(i.s();!(e=i.n()).done;){var n=e.value;s.push(n.title)}}catch(N){i.e(N)}finally{i.f()}var o,l=[],c=[],p=Object(r["a"])(t);try{for(p.s();!(o=p.n()).done;){var d=o.value,u=this.inputLayerFilter.toLowerCase(),h=this.inputTagsFilter.toLowerCase(),y=d.title.toLowerCase();if(d.tags){var f=d.tags.join().toLowerCase();if(s.includes(d.title)&&y.includes(u)&&d.category.includes(this.selectedCategory)&&f.includes(h)||s.includes(d.title)&&y.includes(h)&&d.category.includes(this.selectedCategory)||s.includes(d.title)&&this.activeLayers.includes(d.title)){var m,g=Object(r["a"])(a);try{for(g.s();!(m=g.n()).done;){var b=m.value;b.title===d.title&&(d.options=b.options)}}catch(N){g.e(N)}finally{g.f()}l.push(d)}}else if(""!==this.inputTagsFilter){if(s.includes(d.title)&&y.includes(h)&&d.category.includes(this.selectedCategory)||s.includes(d.title)&&this.activeLayers.includes(d.title)){var v,L=Object(r["a"])(a);try{for(L.s();!(v=L.n()).done;){var $=v.value;$.title===d.title&&(d.options=$.options)}}catch(N){L.e(N)}finally{L.f()}l.push(d)}}else if(s.includes(d.title)&&y.includes(u)&&d.category.includes(this.selectedCategory)||s.includes(d.title)&&this.activeLayers.includes(d.title)){var w,k=Object(r["a"])(a);try{for(k.s();!(w=k.n()).done;){var S=w.value;S.title===d.title&&(d.options=S.options)}}catch(N){k.e(N)}finally{k.f()}l.push(d)}}}catch(N){p.e(N)}finally{p.f()}for(var D=function(){var e=x[M],t=l.filter((function(t){return t.title===e}));t&&t[0]&&c.push(t[0])},M=0,x=s;M<x.length;M++)D();return c},inputLayerFilter:function(){return this.$store.state.layers.inputLayerFilter},inputTagsFilter:function(){return this.$store.state.layers.inputTagsFilter}},methods:{handleLayerFilterFormKeyup:function(e){var t=e.target.value;this.$store.commit("setInputLayerFilter",t)},handleLayerFilterFormX:function(e){e.target[0].value="",this.$store.commit("setInputLayerFilter","")},handleTagsFilterFormKeyup:function(e){var t=e.target.value;this.$store.commit("setInputTagsFilter",t)},handleTagsFilterFormX:function(e){e.target[0].value="",this.$store.commit("setInputTagsFilter","")},didSelectCategory:function(e){var t=e.target.selectedIndex;this.$store.commit("setSelectedCategory",this.categories[t])},preventEnter:function(e){13===e.keyCode&&e.preventDefault()}}},c=l,p=(a("8704"),a("2877")),d=Object(p["a"])(c,s,i,!1,null,"d415bbc4",null);t["default"]=d.exports},c045:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.checkboxClass},[a("div",{staticClass:"div-row"},[e.shouldShowDataLink?a("a",{attrs:{href:"http://metadata.phila.gov/#home/representationdetails/"+e.bennyId,target:"_blank"}},[a("span",[a("font-awesome-icon",{staticClass:"fa-2x",attrs:{icon:"info-circle"}})],1)]):e._e(),e.shouldShowDataLinks&&!e.shouldShowDataLink?a("div",{staticClass:"missing-data-link"}):e._e(),a("input",{class:{disabled:e.shouldBeDisabled},attrs:{id:"checkbox-"+e.layerName,layerid:e.layerId,disabled:e.shouldBeDisabled,type:"checkbox"},domProps:{checked:e.webMapActiveLayers.includes(e.layerName)},on:{click:e.checkboxToggle}}),a("label",{class:{disabled:e.shouldBeDisabled,"label-text":e.shouldShowDataLink,"label-text-no-datalinks":!e.shouldShowDataLink},attrs:{for:"checkbox-"+e.layerName}},[a("div",{staticClass:"layer-name"},[e._v(e._s(e.layerName))])])]),this.$store.state.map.webMapActiveLayers.includes(e.layerName)&&e.computedShouldShowLegendBox?a("legend-box",{attrs:{layer:e.layer,"layer-name":e.layerName,"layer-id":e.layerId,"layer-definition":e.layerDefinition,legend:e.legend,scales:this.$config.map.scales}}):e._e(),this.$store.state.map.webMapActiveLayers.includes(e.layerName)&&e.computedShouldShowSlider?a("slider",{attrs:{layer:e.layer,"layer-name":e.layerName,"layer-id":e.layerId,opacity:e.opacity}}):e._e(),this.$store.state.map.webMapActiveLayers.includes(e.layerName)?a("topic-component-group",{attrs:{"topic-components":e.options.components}}):e._e()],1)},i=[],r=(a("caad"),a("c975"),a("d81d"),a("a434"),a("b64b"),a("ac1f"),a("2532"),a("5319"),a("b85c")),n=a("f076"),o=a("076f"),l=a("5b50"),c=a("d37c"),p={components:{TopicComponentGroup:o["default"],LegendBox:l["default"],Slider:c["default"]},mixins:[n["a"]],props:["layer","layerName","layerId","layerDefinition","opacity","legend","tags","shouldShowDataLinks"],data:function(){return{opa:100*this.$props.opacity}},computed:{checkboxClass:function(){return this.webMapActiveLayers.includes(this.$props.layerName)?"main-div-selected":"main-div"},computedShouldShowLegendBox:function(){return!this.$props.options||(!Object.keys(this.$props.options).includes("shouldShowLegendBox")||this.$props.options.shouldShowLegendBox)},computedShouldShowSlider:function(){return!this.$props.options||(!Object.keys(this.$props.options).includes("shouldShowSlider")||this.$props.options.shouldShowSlider)},matchingTags:function(){var e=[];if(null!==this.$props.tags&&""!==this.inputTagsFilter){var t,a=Object(r["a"])(this.$props.tags);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.toLowerCase().includes(this.inputTagsFilter.toLowerCase())&&e.push(s)}}catch(i){a.e(i)}finally{a.f()}}return e},inputTagsFilter:function(){return this.$store.state.layers.inputTagsFilter},scale:function(){return this.$store.state.map.scale},shouldBeDisabled:function(){var e,t=this.$props.layerDefinition;return t?t.minScale&&(e=this.scale>t.minScale):e=!1,e},layerUrls:function(){return this.$store.state.layers.layerUrls},bennyEndpoints:function(){return this.$store.state.bennyEndpoints},url:function(){return this.layerUrls[this.$props.layerName]},shouldShowDataLink:function(){return!(!this.bennyId||!this.$props.shouldShowDataLinks)},bennyId:function(){if(Object.keys(this.bennyEndpoints).length>0){var e=this.bennyEndpoints[this.url];return e}return" "},webMapUrlLayer:function(){return this.$store.state.map.webMapUrlLayer},webMapActiveLayers:function(){return this.$store.state.map.webMapActiveLayers},webMapDisplayedLayers:function(){return this.$store.state.map.webMapDisplayedLayers},webMapGeoJson:function(){return this.$store.state.map.webMapGeoJson}},watch:{opa:function(e){var t={layerName:this.$props.layerName,opa:e/100};this.$store.commit("setWebMapLayersOpacity",t)},shouldBeDisabled:function(e){this.webMapActiveLayers.includes(this.$props.layerName)&&!0===e?this.removeFromWebMapDisplayedLayers():this.webMapActiveLayers.includes(this.$props.layerName)&&!1===e&&this.addToWebMapDisplayedLayers()}},methods:{trim:function(e){return(e||"").replace(/^\s+|\s+$/g,"")},checkboxToggle:function(e){console.log("checkboxToggle",e.target,e.target.id,e.target.checked);var t=this.webMapUrlLayer,a=this.webMapActiveLayers,s=this.webMapDisplayedLayers,i=e.target.id.replace("checkbox-","");if(e.target.checked)console.log("target checked, targetReplace:",i),a.push(i),s.push(i),1===a.length&&this.$store.commit("setWebMapUrlLayer",i);else{console.log("target not checked");var r=a.indexOf(i);r>=0&&a.splice(r,1);var n=s.indexOf(i);n>=0&&s.splice(n,1),t===i&&this.$store.commit("setWebMapUrlLayer",null)}this.$store.commit("setWebMapActiveLayers",a),this.$store.commit("setWebMapDisplayedLayers",s)},removeFromWebMapDisplayedLayers:function(){var e=this.webMapDisplayedLayers,t=e.indexOf(this.$props.layerName);t>=0&&e.splice(t,1),this.$store.commit("setWebMapDisplayedLayers",e)},addToWebMapDisplayedLayers:function(){var e=this.webMapDisplayedLayers;e.push(this.$props.layerName),this.$store.commit("setWebMapDisplayedLayers",e)}}},d=p,u=(a("4166"),a("2877")),h=Object(u["a"])(d,s,i,!1,null,"2060c6a4",null);t["default"]=h.exports},d37c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"slider-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.opa,expression:"opa"}],staticClass:"slider",attrs:{type:"range",min:"1",max:"100",step:"1"},domProps:{value:e.opa},on:{__r:function(t){e.opa=t.target.value}}})])},i=[],r=(a("f076"),{props:["layer","layerName","layerId","opacity"],data:function(){return{opa:100*this.$props.opacity}},computed:{},watch:{opa:function(e){var t={layerName:this.$props.layerName,opa:e/100};this.$store.commit("setWebMapLayersOpacity",t)}},created:function(){},methods:{}}),n=r,o=(a("eb42"),a("2877")),l=Object(o["a"])(n,s,i,!1,null,null,null);t["default"]=l.exports},e50b:function(e,t,a){},eb42:function(e,t,a){"use strict";var s=a("6eea"),i=a.n(s);i.a},fe9d:function(e,t,a){}}]);
//# sourceMappingURL=tcg_pvc_CheckboxSet.js.map