{"version":3,"sources":["webpack:///./node_modules/@phila/vue-mapping/src/mapbox/UI/MbIcon.vue","webpack:///node_modules/@phila/vue-mapping/src/mapbox/UI/MbIcon.vue","webpack:///./node_modules/@phila/vue-mapping/src/mapbox/UI/MbIcon.vue?16a0"],"names":["render","staticRenderFns","name","props","watch","rotationAngle","console","log","this","$mapboxElement","mounted","map","parentMounted","destroyed","removeLayer","methods","createMapboxElement","loadImage","component"],"mappings":"+JAAIA,EAAQC,ECEZ,GACEC,KAAM,SACNC,MAAO,CACT,MACA,iBAMEC,MAAO,CACLC,cADJ,SACA,GAEMC,QAAQC,IAAI,4CAA6CC,KAAKC,kBAclEC,QA3BF,WA4BI,IAAJ,wBACIJ,QAAQC,IAAI,sCAAuCI,GACvD,+CAGQA,GAIFH,KAAKI,cAAcD,IAGvBE,UAxCF,WAyCI,IAAJ,4BACIF,EAAIG,YAAY,WAElBC,QAAS,CACPC,oBADJ,WAEMV,QAAQC,IAAI,kCAGZ,IAAN,4BACMD,QAAQC,IAAI,4CAA6CI,GACzDA,EAAIM,UACV,iBACA,cACQ,GAAR,EACU,MAAV,EAEQ,QAAR,qCACA,8DACU,EAAV,sBAEA,qDACU,EAAV,mBACY,KAAZ,UACY,KAAZ,CACc,KAAd,oBACc,SAAd,CACA,CACgB,KAAhB,UACgB,SAAhB,CACkB,KAAlB,QACkB,YAAlB,6BAOQ,EAAR,UACU,GAAV,SACU,KAAV,SACU,OAAV,QACU,OAAV,CACY,aAAZ,UACY,YAAZ,GACY,qBAAZ,EACY,0BAAZ,aAeIL,cAzDJ,SAyDA,MAMEZ,OA3GF,SA2GA,MC7G4T,I,YFOxTkB,EAAY,eACd,EACAlB,EACAC,GACA,EACA,KACA,KACA,MAIa,aAAAiB,E","file":"static/js/pvm_MbIcon.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./MbIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./MbIcon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\n\nexport default {\n  name: 'MbIcon',\n  props: [\n    'url',\n    'rotationAngle',\n    // 'minZoom',\n    // 'maxZoom',\n    // 'zIndex',\n    // 'attribution',\n  ],\n  watch: {\n    rotationAngle(nextRotationAngle) {\n      // let map = this.$store.state.map.map;\n      console.log('watch rotationAngle, this.$mapboxElement:', this.$mapboxElement);\n    //   if (this.$leafletElement._map) {\n    //     console.log('pngMarker orientation changed', nextRotationAngle);\n    //     this.$leafletElement._map.removeLayer(this.$leafletElement);\n    //   }\n    //   const leafletElement = this.$leafletElement = this.createLeafletElement();\n    //   const map = this.$store.state.map.map;\n    //\n    //   // REVIEW kind of hacky/not reactive?\n    //   if (map) {\n    //     leafletElement.addTo(map);\n    //   }\n    },\n  },\n  mounted() {\n    const map = this.$store.state.map;\n    console.log('MbIcon.vue mounted is running, map:', map);\n    const mapboxElement = this.$mapboxElement = this.createMapboxElement();\n\n    // REVIEW kind of hacky/not reactive?\n    if (map) {\n    //   leafletElement.addTo(map);\n    //   map.attributionControl.removeAttribution('overwrite');\n    //   map.attributionControl.removeAttribution('<span class=\"esri-attributions\" style=\"line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block; max-width:1385px;\"></span>');\n      this.parentMounted(map);\n    }\n  },\n  destroyed() {\n    const map = this.$store.state.map.map;\n    map.removeLayer('points');\n  },\n  methods: {\n    createMapboxElement() {\n      console.log('MbIcon.vue createMapboxElement');\n\n      // const map = parent.map;\n      const map = this.$store.state.map.map;\n      console.log('MbIcon.vue parentMounted is running, map:', map);\n      map.loadImage(\n        this.$props.url,\n        function(error, image) {\n          if (error) {\n            throw error;\n          }\n          console.log('in loadImage callback, map:', map);\n          if (!Object.keys(map.style.imageManager.images).includes('markers')) {\n            map.addImage('markers', image);\n          }\n          if (!Object.keys(map.style.sourceCaches).includes('point')) {\n            map.addSource('point', {\n              'type': 'geojson',\n              'data': {\n                'type': 'FeatureCollection',\n                'features': [\n                  {\n                    'type': 'Feature',\n                    'geometry': {\n                      'type': 'Point',\n                      'coordinates': [ -75.163471, 39.953338 ],\n                    },\n                  },\n                ],\n              },\n            });\n          }\n          map.addLayer({\n            'id': 'points',\n            'type': 'symbol',\n            'source': 'point',\n            'layout': {\n              'icon-image': 'markers',\n              'icon-size': 0.20,\n              'icon-keep-upright': true,\n              'icon-rotation-alignment': 'map',\n              // 'symbol-placement': 'line',\n            },\n          });\n        },\n      );\n\n\n      // let layer = {\n      //   'id': 'labels',\n      //   'type': 'raster',\n      //   'source': 'labels',\n      // }\n      // return layer;\n    },\n    parentMounted(parent) {\n      // const mapboxElement = this.$mapboxElement = this.createMapboxElement(parent);\n\n\n    },\n  },\n  render(h) {\n    return;\n  },\n};\n</script>\n","import mod from \"-!../../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../../thread-loader/dist/cjs.js!../../../../../babel-loader/lib/index.js!../../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../../vue-loader/lib/index.js??vue-loader-options!./MbIcon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../../thread-loader/dist/cjs.js!../../../../../babel-loader/lib/index.js!../../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../../vue-loader/lib/index.js??vue-loader-options!./MbIcon.vue?vue&type=script&lang=js&\""],"sourceRoot":""}