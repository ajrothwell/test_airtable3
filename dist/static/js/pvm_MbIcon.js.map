{"version":3,"sources":["webpack:///./node_modules/@phila/vue-mapping/src/mapbox/UI/MbIcon.vue","webpack:///node_modules/@phila/vue-mapping/src/mapbox/UI/MbIcon.vue","webpack:///./node_modules/@phila/vue-mapping/src/mapbox/UI/MbIcon.vue?16a0"],"names":["render","staticRenderFns","name","props","watch","rotationAngle","console","log","this","$mapboxElement","mounted","map","parentMounted","destroyed","removeLayer","methods","createMapboxElement","loadImage","component"],"mappings":"+JAAIA,EAAQC,ECEZ,GACEC,KAAM,SACNC,MAAO,CACT,MACA,iBAMEC,MAAO,CACLC,cADJ,SACA,GAEMC,QAAQC,IAAI,4CAA6CC,KAAKC,kBAclEC,QA3BF,WA4BI,IAAJ,wBACIJ,QAAQC,IAAI,sCAAuCI,GACvD,+CAGQA,GAIFH,KAAKI,cAAcD,IAGvBE,UAxCF,WAyCI,IAAJ,4BACIF,EAAIG,YAAY,WAElBC,QAAS,CACPC,oBADJ,WAEMV,QAAQC,IAAI,kCAGZ,IAAN,4BACMD,QAAQC,IAAI,4CAA6CI,GACzDA,EAAIM,UACV,iBACA,cACQ,GAAR,EACU,MAAV,EAEQ,QAAR,qCACA,8DACU,EAAV,sBAEA,qDACU,EAAV,mBACY,KAAZ,UACY,KAAZ,CACc,KAAd,oBACc,SAAd,CACA,CACgB,KAAhB,UACgB,SAAhB,CACkB,KAAlB,QACkB,YAAlB,6BAOQ,EAAR,UACU,GAAV,SACU,KAAV,SACU,OAAV,QACU,OAAV,CACY,aAAZ,UACY,YAAZ,GACY,qBAAZ,EACY,0BAAZ,aAeIL,cAzDJ,SAyDA,MAMEZ,OA3GF,SA2GA,MC7G4T,I,YFOxTkB,EAAY,eACd,EACAlB,EACAC,GACA,EACA,KACA,KACA,MAIa,aAAAiB,E","file":"static/js/pvm_MbIcon.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./MbIcon.vue?vue&type=script&lang=js&\"\nexport * from \"./MbIcon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\r\n\r\nexport default {\r\n  name: 'MbIcon',\r\n  props: [\r\n    'url',\r\n    'rotationAngle',\r\n    // 'minZoom',\r\n    // 'maxZoom',\r\n    // 'zIndex',\r\n    // 'attribution',\r\n  ],\r\n  watch: {\r\n    rotationAngle(nextRotationAngle) {\r\n      // let map = this.$store.state.map.map;\r\n      console.log('watch rotationAngle, this.$mapboxElement:', this.$mapboxElement);\r\n    //   if (this.$leafletElement._map) {\r\n    //     console.log('pngMarker orientation changed', nextRotationAngle);\r\n    //     this.$leafletElement._map.removeLayer(this.$leafletElement);\r\n    //   }\r\n    //   const leafletElement = this.$leafletElement = this.createLeafletElement();\r\n    //   const map = this.$store.state.map.map;\r\n    //\r\n    //   // REVIEW kind of hacky/not reactive?\r\n    //   if (map) {\r\n    //     leafletElement.addTo(map);\r\n    //   }\r\n    },\r\n  },\r\n  mounted() {\r\n    const map = this.$store.state.map;\r\n    console.log('MbIcon.vue mounted is running, map:', map);\r\n    const mapboxElement = this.$mapboxElement = this.createMapboxElement();\r\n\r\n    // REVIEW kind of hacky/not reactive?\r\n    if (map) {\r\n    //   leafletElement.addTo(map);\r\n    //   map.attributionControl.removeAttribution('overwrite');\r\n    //   map.attributionControl.removeAttribution('<span class=\"esri-attributions\" style=\"line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block; max-width:1385px;\"></span>');\r\n      this.parentMounted(map);\r\n    }\r\n  },\r\n  destroyed() {\r\n    const map = this.$store.state.map.map;\r\n    map.removeLayer('points');\r\n  },\r\n  methods: {\r\n    createMapboxElement() {\r\n      console.log('MbIcon.vue createMapboxElement');\r\n\r\n      // const map = parent.map;\r\n      const map = this.$store.state.map.map;\r\n      console.log('MbIcon.vue parentMounted is running, map:', map);\r\n      map.loadImage(\r\n        this.$props.url,\r\n        function(error, image) {\r\n          if (error) {\r\n            throw error;\r\n          }\r\n          console.log('in loadImage callback, map:', map);\r\n          if (!Object.keys(map.style.imageManager.images).includes('markers')) {\r\n            map.addImage('markers', image);\r\n          }\r\n          if (!Object.keys(map.style.sourceCaches).includes('point')) {\r\n            map.addSource('point', {\r\n              'type': 'geojson',\r\n              'data': {\r\n                'type': 'FeatureCollection',\r\n                'features': [\r\n                  {\r\n                    'type': 'Feature',\r\n                    'geometry': {\r\n                      'type': 'Point',\r\n                      'coordinates': [ -75.163471, 39.953338 ],\r\n                    },\r\n                  },\r\n                ],\r\n              },\r\n            });\r\n          }\r\n          map.addLayer({\r\n            'id': 'points',\r\n            'type': 'symbol',\r\n            'source': 'point',\r\n            'layout': {\r\n              'icon-image': 'markers',\r\n              'icon-size': 0.20,\r\n              'icon-keep-upright': true,\r\n              'icon-rotation-alignment': 'map',\r\n              // 'symbol-placement': 'line',\r\n            },\r\n          });\r\n        },\r\n      );\r\n\r\n\r\n      // let layer = {\r\n      //   'id': 'labels',\r\n      //   'type': 'raster',\r\n      //   'source': 'labels',\r\n      // }\r\n      // return layer;\r\n    },\r\n    parentMounted(parent) {\r\n      // const mapboxElement = this.$mapboxElement = this.createMapboxElement(parent);\r\n\r\n\r\n    },\r\n  },\r\n  render(h) {\r\n    return;\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../../thread-loader/dist/cjs.js!../../../../../babel-loader/lib/index.js!../../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../../vue-loader/lib/index.js??vue-loader-options!./MbIcon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../../thread-loader/dist/cjs.js!../../../../../babel-loader/lib/index.js!../../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../../vue-loader/lib/index.js??vue-loader-options!./MbIcon.vue?vue&type=script&lang=js&\""],"sourceRoot":""}