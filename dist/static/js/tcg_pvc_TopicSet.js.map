{"version":3,"sources":["webpack:///./node_modules/@phila/pinboard/node_modules/@phila/vue-comps/src/components/TopicSet.vue?18a8","webpack:///node_modules/@phila/pinboard/node_modules/@phila/vue-comps/src/components/TopicSet.vue","webpack:///./node_modules/@phila/pinboard/node_modules/@phila/vue-comps/src/components/TopicSet.vue?cef5","webpack:///./node_modules/@phila/pinboard/node_modules/@phila/vue-comps/src/components/TopicSet.vue","webpack:///./node_modules/@phila/pinboard/node_modules/@phila/vue-comps/src/components/Topic.vue?b7da","webpack:///node_modules/@phila/pinboard/node_modules/@phila/vue-comps/src/components/Topic.vue","webpack:///./node_modules/@phila/pinboard/node_modules/@phila/vue-comps/src/components/Topic.vue?8d8b","webpack:///./node_modules/@phila/pinboard/node_modules/@phila/vue-comps/src/components/Topic.vue","webpack:///./node_modules/@phila/pinboard/node_modules/@phila/vue-comps/src/components/Topic.vue?7faf"],"names":["render","_vm","this","_h","$createElement","_c","_self","_l","$config","topic","key","attrs","on","handleTopicHeaderClick","getMoreRecords","staticRenderFns","name","components","Topic","mixins","mounted","$store","state","activeTopic","setDefaultTopicActive","methods","$emit","dataSource","highestPageRetrieved","nextTopic","$props","options","defaultTopic","commit","component","class","shouldBeDisabled","topicKey","$event","preventDefault","staticClass","icon","_v","_s","label","directives","rawName","value","status","expression","_e","domProps","errorMessage","props","computed","disabled","topicsFiltered","length","config","isActive","shouldShowHeader","topics","dataSources","hasData","targetsFn","targets","every","shouldShowBody","should","shouldShowTopic","showTopicOnlyIfDataExists","shouldShowError","console","log","cache","get","map","target","topicStatus","flatArray","includes","showTopicBasedOnOtherData","requiredDataExists","sources","otherDataSource","dataSourceKey","answers","push","checkForData","beforeCreate","$options","TopicComponentGroup","requiredDataSource","data","pathToDataArray","dataArray","minDataLength","result","configForBasemap","basemaps"],"mappings":"2IAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAMJ,EAAIM,GAAIL,KAAKM,QAAc,QAAE,SAASC,GAAO,OAAOJ,EAAG,QAAQ,CAACK,IAAID,EAAMC,IAAIC,MAAM,CAAC,YAAYF,EAAMC,KAAKE,GAAG,CAAC,4BAA4BX,EAAIY,uBAAuB,mBAAmBZ,EAAIa,qBAAoB,IACvTC,EAAkB,G,wBCetB,GACEC,KAAM,WACNC,WAAY,CACVC,MAAJ,cAEEC,OAAQ,CAAC,EAAX,MACEC,QANF,WAO0C,OAAlClB,KAAKmB,OAAOC,MAAMC,aAA0D,KAAlCrB,KAAKmB,OAAOC,MAAMC,aAC9DrB,KAAKsB,yBAGTC,QAAS,CACPX,eADJ,SACA,KAEMZ,KAAKwB,MAAM,mBAAoBC,EAAYC,IAE7Cf,uBALJ,SAKA,GAEMX,KAAKwB,MAAM,4BAA6BG,IAE1CL,sBATJ,WAUUtB,KAAK4B,OAAOC,QAAQC,cACtB9B,KAAKmB,OAAOY,OAAO,iBAAkB/B,KAAK4B,OAAOC,QAAQC,iBCtC2R,I,YCOxVE,EAAY,eACd,EACAlC,EACAe,GACA,EACA,KACA,KACA,MAIa,aAAAmB,E,kDClBf,IAAIlC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAmB,gBAAEI,EAAG,MAAM,CAAEJ,EAAoB,iBAAEI,EAAG,IAAI,CAAC8B,MAAMlC,EAAImC,iBAAmB,wBAA0B,eAAezB,MAAM,CAAC,iBAAiBV,EAAIoC,SAAS,KAAO,KAAKzB,GAAG,CAAC,MAAQ,SAAS0B,GAAgC,OAAxBA,EAAOC,iBAAwBtC,EAAIY,uBAAuByB,MAAW,CAACjC,EAAG,MAAM,CAACmC,YAAY,wBAAwB,CAACnC,EAAG,oBAAoB,CAACM,MAAM,CAAC,KAAOV,EAAIwC,QAAQpC,EAAG,MAAM,CAACmC,YAAY,6BAA6B,CAACvC,EAAIyC,GAAG,IAAIzC,EAAI0C,GAAG1C,EAAIQ,MAAMmC,OAAO,QAAQ,GAAGvC,EAAG,OAAO,CAACwC,WAAW,CAAC,CAAC7B,KAAK,OAAO8B,QAAQ,SAASC,MAAsB,YAAf9C,EAAI+C,OAAsBC,WAAW,yBAAyBT,YAAY,WAAW,CAACnC,EAAG,oBAAoB,CAACmC,YAAY,aAAa7B,MAAM,CAAC,KAAO,cAAc,KAAKV,EAAIiD,KAAK7C,EAAG,aAAa,CAACM,MAAM,CAAC,KAAO,eAAe,CAAEV,EAAkB,eAAEI,EAAG,MAAM,CAACmC,YAAY,aAAa7B,MAAM,CAAC,iBAAiBV,EAAIoC,WAAW,CAAChC,EAAG,wBAAwB,CAACM,MAAM,CAAC,mBAAmBV,EAAIQ,MAAMQ,YAAYL,GAAG,CAAC,mBAAmBX,EAAIa,mBAAmB,GAAGb,EAAIiD,OAAO7C,EAAG,MAAM,CAACwC,WAAW,CAAC,CAAC7B,KAAK,OAAO8B,QAAQ,SAASC,MAAO9C,EAAmB,gBAAEgD,WAAW,oBAAoBT,YAAY,aAAaW,SAAS,CAAC,UAAYlD,EAAI0C,GAAG1C,EAAImD,kBAAkB,GAAGnD,EAAIiD,MAC9vCnC,EAAkB,G,gGCwDtB,GACEC,KAAM,QACNC,WAAY,GACZoC,MAAO,CAAC,YACRC,SAAU,CACRlB,iBADJ,WAEM,QAAIlC,KAAKO,MAAM8C,UAOjB9C,MATJ,WASA,WACA,uBACA,0CACQ,OAAOA,EAAMC,MAAQ,EAA7B,mBAEM,GAA8B,IAA1B8C,EAAeC,OACjB,KAAM,iDAAd,eAEM,IAAN,OACM,OAAOC,GAETjB,KApBJ,WAqBM,OAAOvC,KAAKO,MAAMgC,MAEpBkB,SAvBJ,WAwBM,IAAN,iBACA,gCACM,OAAOpC,IAAgBb,GAEzBkD,iBA5BJ,WA6BM,OAAO1D,KAAKM,QAAQqD,OAAOJ,OAAS,GAEtCK,YA/BJ,WAgCM,OAAO5D,KAAKO,MAAMqD,aAAe,IAEnCC,QAlCJ,WAkCA,WAIA,sCACQ,IAAR,mCAGQ,GAAIC,EAAW,CACb,IAAV,oCACA,mBAGU,OAAuB,IAAnBC,EAAQR,QAMLQ,EAAQC,OAAM,SAA/B,iCAKA,uCACc,EAAd,oCACgB,EAAhB,uEAYiB,EAAjB,gCAIM,OAAOH,GAETI,eA9EJ,WA+EM,IAAN,0BACA,eACA,sBACM,OAAOC,GAETC,gBApFJ,WAqFM,OAAKnE,KAAKO,MAAM6D,8BAGtB,gCAIapE,KAAKoE,4BAGdC,gBA/FJ,WAgGM,IAAN,EAEM,KAAN,WAEA,UAAM,KAAN,QAEA,YAAM,KAAN,uBAIM,OADAA,GAAmBC,QAAQC,IAAI,qBAAsBvE,KAAKmC,SAAU,mBAAoBkC,EAAiB,UAAWrE,KAAK8C,OAAQ,WAAY9C,KAAK6D,SAC3IQ,GAETnB,aA5GJ,WA6GM,OAAIlD,KAAKO,MAAM2C,aACNlD,KAAKO,MAAM2C,aAAalD,KAAKmB,OAAOC,OAEtC,8CAIT0B,OAAQ,CACN0B,OAAO,EACPC,IAFN,WAEA,IASA,EATA,OAEA,6BAGQ,GAA2B,IAAvBb,EAAYL,OACd,MAAO,UAIT,IAVR,EAUA,qBACU,IAAV,mCAGU,GAAIO,EAAW,CACb,IAAZ,oCACA,mBAGY,GAAuB,IAAnBC,EAAQR,OACV,OAKF,OAAOQ,EAAQW,KAAI,SAA/B,GACc,OAAOC,EAAO7B,UAMlB,MAAO,CAAC,EAAlB,mCAIA,KApCA,iBAqCA,GArCA,IAqCA,0CACA,6BACA,GADA,IACA,0CACA,WAFA,iCAtCA,8BAoDQ,OANE8B,EADEC,EAAUC,SAAS,WACP,UACxB,oBACwB,QAEA,UAETF,IAGXG,0BA7KJ,WA+KM,IAAK/E,KAAKO,MAAMwE,0BACd,OAAO,EAIT,IAAN,oDACA,uBAEM,IAAKC,EACH,OAAO,EAMT,IAFA,IAAN,8DACA,KACA,uBAGQ,IAHR,WACA,oDACA,iBACA,mCACchF,KAAKmB,OAAOC,MAAM6D,QAAQC,GAAiBC,KAAmB1D,EAAW0D,GAC3EC,EAAQC,MAAK,GAEbD,EAAQC,MAAK,GAInB,OAAKD,EAAQN,UAAS,IAMxBV,0BA/MJ,WAgNM,OAAOpE,KAAKsF,aAAatF,KAAKO,MAAM6D,6BAGxCmB,aAvNF,WAwNIvF,KAAKwF,SAASzE,WAAW0E,oBAAsBA,EAAnD,YAEElE,QAAS,CACPX,eADJ,SACA,KACM0D,QAAQC,IAAI,mDAAoD9C,EAAY,wBAAyBC,GAErG1B,KAAKwB,MAAM,mBAAoBC,EAAYC,IAE7C4D,aANJ,SAMA,GAIM,IAHA,IAAN,iBAEA,KACA,mCACA,uBACA,qBACA,SACQ,IAAKtF,KAAKmB,OAAOC,MAAM6D,QAAQS,GAAoBC,KAEjD,OAAO,EAEJC,EAEb,eACUC,EAAY7F,KAAKmB,OAAOC,MAAM6D,QAAQS,GAAoBC,KAAKC,EAAgB,KAF/EC,EAAY7F,KAAKmB,OAAOC,MAAM6D,QAAQS,GAAoBC,KAQxDE,EAAUtC,OAASuC,IACrBC,GAAS,GAIb,OAAOA,GAETC,iBAlCJ,SAkCA,GACM,OAAOhG,KAAKM,QAAQoE,IAAIuB,SAASzF,IAGnCG,uBAtCJ,SAsCA,GAEM,IACN,EADA,uBAGUJ,IAAUP,KAAKmB,OAAOC,MAAMC,cAC9BM,EAAYpB,GAGdP,KAAKwB,MAAM,4BAA6BG,MClU2S,I,wBCQrVK,EAAY,eACd,EACAlC,EACAe,GACA,EACA,KACA,WACA,MAIa,aAAAmB,E,oECnBf,yBAAgf,EAAG","file":"static/js/tcg_pvc_TopicSet.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((this.$config.topics),function(topic){return _c('topic',{key:topic.key,attrs:{\"topic-key\":topic.key},on:{\"handle-topic-header-click\":_vm.handleTopicHeaderClick,\"get-more-records\":_vm.getMoreRecords}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <topic \r\n      v-for=\"topic in this.$config.topics\"\r\n      :key=\"topic.key\"\r\n      :topic-key=\"topic.key\"\r\n      @handle-topic-header-click=\"handleTopicHeaderClick\"\r\n      @get-more-records=\"getMoreRecords\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Topic from './Topic.vue';\r\nimport TopicComponent from './TopicComponent.vue';\r\n\r\nexport default {\r\n  name: 'TopicSet',\r\n  components: {\r\n    Topic,\r\n  },\r\n  mixins: [ TopicComponent ],\r\n  mounted() {\r\n    if (this.$store.state.activeTopic === null || this.$store.state.activeTopic === '') {\r\n      this.setDefaultTopicActive();\r\n    }\r\n  },\r\n  methods: {\r\n    getMoreRecords(dataSource, highestPageRetrieved) {\r\n      // console.log('TopicSet getMoreRecords is running, dataSource:', dataSource, 'highestPageRetrieved:', highestPageRetrieved);\r\n      this.$emit('get-more-records', dataSource, highestPageRetrieved);\r\n    },\r\n    handleTopicHeaderClick(nextTopic) {\r\n      // console.log('TopicSet.vue handleTopicHeaderClick is running, nextTopic:', nextTopic);\r\n      this.$emit('handle-topic-header-click', nextTopic);\r\n    },\r\n    setDefaultTopicActive() {\r\n      if (this.$props.options.defaultTopic) {\r\n        this.$store.commit('setActiveTopic', this.$props.options.defaultTopic);\r\n        // this.$store.state.activeTopic = this.$props.options.defaultTopic;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../../../../thread-loader/dist/cjs.js!../../../../../../../babel-loader/lib/index.js!../../../../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../../../../vue-loader/lib/index.js??vue-loader-options!./TopicSet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../../../../thread-loader/dist/cjs.js!../../../../../../../babel-loader/lib/index.js!../../../../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../../../../vue-loader/lib/index.js??vue-loader-options!./TopicSet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TopicSet.vue?vue&type=template&id=5b88402a&\"\nimport script from \"./TopicSet.vue?vue&type=script&lang=js&\"\nexport * from \"./TopicSet.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.shouldShowTopic)?_c('div',[(_vm.shouldShowHeader)?_c('a',{class:_vm.shouldBeDisabled ? 'topic-header-disabled' : 'topic-header',attrs:{\"data-topic-key\":_vm.topicKey,\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.handleTopicHeaderClick($event)}}},[_c('div',{staticClass:\"topic-header-content\"},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon}}),_c('div',{staticClass:\"topic-header-label-holder\"},[_vm._v(\" \"+_vm._s(_vm.topic.label)+\" \")])],1),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status === 'waiting'),expression:\"status === 'waiting'\"}],staticClass:\"loading\"},[_c('font-awesome-icon',{staticClass:\"fa-lg spin\",attrs:{\"icon\":\"spinner\"}})],1)]):_vm._e(),_c('transition',{attrs:{\"name\":\"topic-body\"}},[(_vm.shouldShowBody)?_c('div',{staticClass:\"topic-body\",attrs:{\"data-topic-key\":_vm.topicKey}},[_c('topic-component-group',{attrs:{\"topic-components\":_vm.topic.components},on:{\"get-more-records\":_vm.getMoreRecords}})],1):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shouldShowError),expression:\"shouldShowError\"}],staticClass:\"topic-body\",domProps:{\"innerHTML\":_vm._s(_vm.errorMessage)}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"shouldShowTopic\">\r\n    <!-- <div> -->\r\n    <a\r\n      v-if=\"shouldShowHeader\"\r\n      :class=\"shouldBeDisabled ? 'topic-header-disabled' : 'topic-header'\"\r\n      :data-topic-key=\"topicKey\"\r\n      href=\"#\"\r\n      @click.prevent=\"handleTopicHeaderClick\"\r\n    >\r\n      <div class=\"topic-header-content\">\r\n        <font-awesome-icon :icon=\"icon\" />\r\n        <div class=\"topic-header-label-holder\">\r\n          {{ topic.label }}\r\n        </div>\r\n      </div>\r\n      <!-- <div class=\"loading\"> -->\r\n      <span\r\n        v-show=\"status === 'waiting'\"\r\n        class=\"loading\"\r\n      >\r\n        <font-awesome-icon\r\n          icon=\"spinner\"\r\n          class=\"fa-lg spin\"\r\n        />\r\n      </span>\r\n      <!-- </div> -->\r\n    </a>\r\n\r\n    <!-- success -->\r\n    <transition name=\"topic-body\">\r\n      <div\r\n        v-if=\"shouldShowBody\"\r\n        :data-topic-key=\"topicKey\"\r\n        class=\"topic-body\"\r\n      >\r\n        <topic-component-group\r\n          :topic-components=\"topic.components\"\r\n          @get-more-records=\"getMoreRecords\"\r\n        />\r\n      </div>\r\n    </transition>\r\n\r\n    <!-- error -->\r\n    <div\r\n      v-show=\"shouldShowError\"\r\n      class=\"topic-body\"\r\n      v-html=\"errorMessage\"\r\n    >\r\n      <!-- Could not locate records for that address. -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TopicComponentGroup from './TopicComponentGroup.vue';\r\n\r\nexport default {\r\n  name: 'Topic',\r\n  components: {},\r\n  props: [ 'topicKey' ],\r\n  computed: {\r\n    shouldBeDisabled() {\r\n      if (this.topic.disabled) {\r\n        return true;\r\n      }\r\n      return false;\r\n\r\n    },\r\n    // returns the full config object for the topic\r\n    topic() {\r\n      const topicKey = this.$props.topicKey;\r\n      const topicsFiltered = this.$config.topics.filter((topic) => {\r\n        return topic.key === this.$props.topicKey;\r\n      });\r\n      if (topicsFiltered.length !== 1) {\r\n        throw `Could not get single config object for topic '${topicKey}'.`;\r\n      }\r\n      const config = topicsFiltered[0];\r\n      return config;\r\n    },\r\n    icon() {\r\n      return this.topic.icon;\r\n    },\r\n    isActive() {\r\n      const key = this.topic.key;\r\n      const activeTopic = this.$store.state.activeTopic;\r\n      return activeTopic === key;\r\n    },\r\n    shouldShowHeader() {\r\n      return this.$config.topics.length > 1;\r\n    },\r\n    dataSources() {\r\n      return this.topic.dataSources || [];\r\n    },\r\n    hasData() {\r\n      // console.log(this.topicKey, '-', 'hasData?', this.dataSources);\r\n\r\n      // make sure the following is true for all data sources\r\n      const hasData = this.dataSources.every(dataSource => {\r\n        const targetsFn = this.$config.dataSources[dataSource].targets;\r\n\r\n        // if the data source is configured for targets\r\n        if (targetsFn) {\r\n          const targetsMap = this.$store.state.sources[dataSource].targets;\r\n          const targets = Object.values(targetsMap);\r\n\r\n          // but there are no targets for this address, return false\r\n          if (targets.length === 0) {\r\n            return false;\r\n          }\r\n\r\n          // if there are targets for this address, make sure none of them\r\n          // are \"waiting\"\r\n          return targets.every(target => target.status !== 'waiting');\r\n\r\n          // this was added to allow fetchData to run even without a geocode result\r\n          // for the real estate tax site which sometimes needs data from TIPS\r\n          // even if the property is not in OPA and AIS\r\n        } else if (this.$store.state.sources[dataSource].data) {\r\n          if (this.$store.state.sources[dataSource].data.body) {\r\n            if (this.$store.state.sources[dataSource].data.body.includes('Invalid account number')) {\r\n              return false;\r\n            }\r\n            return true;\r\n\r\n          }\r\n          return true;\r\n\r\n\r\n          // if the data source is not configured for targets, just check that\r\n          // it has data\r\n        }\r\n        return !!this.$store.state.sources[dataSource].data;\r\n\r\n      });\r\n\r\n      return hasData;\r\n    },\r\n    shouldShowBody() {\r\n      const succeeded = this.status === 'success';\r\n      const hasData = this.hasData;\r\n      const should = succeeded && hasData && this.isActive;\r\n      return should;\r\n    },\r\n    shouldShowTopic() {\r\n      if (!this.topic.showTopicOnlyIfDataExists) {\r\n        return true;\r\n        // if showTopicOnlyIfDataExists, but you want to overrule that\r\n      } else if (this.showTopicBasedOnOtherData) {\r\n        return true;\r\n        // if showTopicOnlyIfDataExists and it is not overrulled\r\n      }\r\n      return this.showTopicOnlyIfDataExists;\r\n\r\n    },\r\n    shouldShowError() {\r\n      const shouldShowError = (\r\n        // topic must be active and\r\n        this.isActive && (\r\n        // there either has to be an error or\r\n          this.status === 'error' ||\r\n            // we got the response and it's empty\r\n            (this.status !== 'waiting' && !this.hasData)\r\n        )\r\n      );\r\n      shouldShowError && console.log('BINGO BINGO BINGO:', this.topicKey, 'shouldShowError:', shouldShowError, 'status:', this.status, 'hasData:', this.hasData);\r\n      return shouldShowError;\r\n    },\r\n    errorMessage() {\r\n      if (this.topic.errorMessage) {\r\n        return this.topic.errorMessage(this.$store.state);\r\n      }\r\n      return 'Could not locate records for that address.';\r\n\r\n    },\r\n    // REVIEW this is getting cached and not updating when the deps update\r\n    status: {\r\n      cache: false,\r\n      get() {\r\n        // get the status of each source\r\n        const dataSources = this.topic.dataSources || [];\r\n\r\n        // if no sources, return success\r\n        if (dataSources.length === 0) {\r\n          return 'success';\r\n        }\r\n\r\n        let topicStatus;\r\n        const sourceStatuses = dataSources.map(dataSource => {\r\n          const targetsFn = this.$config.dataSources[dataSource].targets;\r\n\r\n          // if the data source is configured for targets\r\n          if (targetsFn) {\r\n            const targetsMap = this.$store.state.sources[dataSource].targets;\r\n            const targets = Object.values(targetsMap);\r\n\r\n            // but there are no targets for this address, return false\r\n            if (targets.length === 0) {\r\n              return;\r\n            }\r\n\r\n            // if there are targets for this address, make sure none of them\r\n            // are \"waiting\"\r\n            return targets.map(target => {\r\n              return target.status;\r\n            });\r\n\r\n            // if the data source is not configured for targets, just check that\r\n            // it has data\r\n          }\r\n          return [ this.$store.state.sources[dataSource].status ];\r\n\r\n        });\r\n\r\n        let flatArray = [];\r\n        for (let sourceStatus of sourceStatuses) {\r\n          if (sourceStatus) {\r\n            for (let sourceStatusValue of sourceStatus) {\r\n              flatArray.push(sourceStatusValue);\r\n            }\r\n          }\r\n        }\r\n\r\n        if (flatArray.includes('waiting')) {\r\n          topicStatus = 'waiting';\r\n        } else if (flatArray.includes('error')) {\r\n          topicStatus = 'error';\r\n        } else {\r\n          topicStatus = 'success';\r\n        }\r\n        return topicStatus;\r\n      },\r\n    },\r\n    showTopicBasedOnOtherData() {\r\n      // stop if \"showTopicBasedOnOtherData\" doesn't exist\r\n      if (!this.topic.showTopicBasedOnOtherData) {\r\n        return false;\r\n      }\r\n\r\n      // stop if the required data for this topic does not exist\r\n      const requiredData = this.topic.showTopicBasedOnOtherData.requiredData;\r\n      let requiredDataExists = this.checkForData(requiredData);\r\n      // console.log('requiredDataExists:', requiredDataExists);\r\n      if (!requiredDataExists) {\r\n        return false;\r\n      }\r\n\r\n      // continue if the other data does not match the conditions put into the \"showTopicBasedOnOtherData\" object\r\n      const otherDataSources = Object.keys(this.topic.showTopicBasedOnOtherData.otherData);\r\n      let answers = [];\r\n      for (let otherDataSource of otherDataSources) {\r\n        const dataSource = this.topic.showTopicBasedOnOtherData.otherData[otherDataSource];\r\n        const dataSourceKeys = Object.keys(dataSource);\r\n        for (let dataSourceKey of dataSourceKeys) {\r\n          if (this.$store.state.sources[otherDataSource][dataSourceKey] === dataSource[dataSourceKey]) {\r\n            answers.push(true);\r\n          } else {\r\n            answers.push(false);\r\n          }\r\n        }\r\n      }\r\n      if (!answers.includes(false)) {\r\n        return true;\r\n      }\r\n      return false;\r\n\r\n    },\r\n    showTopicOnlyIfDataExists() {\r\n      return this.checkForData(this.topic.showTopicOnlyIfDataExists);\r\n    },\r\n  },\r\n  beforeCreate() {\r\n    this.$options.components.TopicComponentGroup = TopicComponentGroup;\r\n  },\r\n  methods: {\r\n    getMoreRecords(dataSource, highestPageRetrieved) {\r\n      console.log('Topic.vue getMoreRecords is running, dataSource:', dataSource, 'highestPageRetrieved:', highestPageRetrieved);\r\n      // this.$emit('test-event', dataSource, highestPageRetrieved);\r\n      this.$emit('get-more-records', dataSource, highestPageRetrieved);\r\n    },\r\n    checkForData(requiredData) {\r\n      const requiredDataSources = Object.keys(requiredData);\r\n      // console.log('checkForData is running, requiredData:', requiredData, 'requiredDataSources:', requiredDataSources);\r\n      let result = true;\r\n      for (let requiredDataSource of requiredDataSources) {\r\n        const pathToDataArray = requiredData[requiredDataSource].pathToDataArray;\r\n        const minDataLength = requiredData[requiredDataSource].minDataLength;\r\n        let dataArray;\r\n        if (!this.$store.state.sources[requiredDataSource].data) {\r\n          // if there is no data (yet)\r\n          return false;\r\n        }\r\n        if (!pathToDataArray) {\r\n          dataArray = this.$store.state.sources[requiredDataSource].data;\r\n        } else if (pathToDataArray.length === 1) {\r\n          dataArray = this.$store.state.sources[requiredDataSource].data[pathToDataArray[0]];\r\n        }\r\n        // TODO - implement system if the path to the data is longer than a single step\r\n        // else {\r\n        //   dataArray = this.$store.state.sources[requiredDataSource].data[pathToDataArray[0]].[pathToDataArray[1]];\r\n        // }\r\n        if (dataArray.length < minDataLength) {\r\n          result = false;\r\n        }\r\n\r\n      }\r\n      return result;\r\n    },\r\n    configForBasemap(key) {\r\n      return this.$config.map.basemaps[key];\r\n    },\r\n\r\n    handleTopicHeaderClick(e) {\r\n      // console.log('Topic.vue handleTopicHeaderClick is running');\r\n      const topic = this.$props.topicKey;\r\n      let nextTopic;\r\n\r\n      if (topic !== this.$store.state.activeTopic) {\r\n        nextTopic = topic;\r\n      }\r\n      // send event up\r\n      this.$emit('handle-topic-header-click', nextTopic);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  /*REVIEW these aren't prefixed `mb-`because they're scoped, but it feels\r\n  inconsistent?*/\r\n  .topic-header, .topic-header-disabled {\r\n    background: #f5f5f5;\r\n    border: 1px solid #ddd;\r\n    display: block;\r\n    font-size: 18px;\r\n    font-weight: normal;\r\n    min-height: 70px;\r\n    line-height: 25px;\r\n    padding: 10px;\r\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\r\n    margin-bottom: 8px;\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: nowrap;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .topic-header-disabled {\r\n    pointer-events: none;\r\n    cursor: default;\r\n  }\r\n\r\n  .topic-header:hover {\r\n    background: #fff;\r\n    color: inherit;\r\n  }\r\n\r\n  .topic-header-content {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n  }\r\n\r\n  .topic-header-icon {\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n  }\r\n\r\n  .topic-header-label-holder {\r\n    margin-left: 15px;\r\n  }\r\n\r\n  .topic-body {\r\n    padding: 5px;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .topic-body-enter-active, .topic-body-leave-active {\r\n    transition: opacity 0.18s;\r\n  }\r\n\r\n  .topic-body-enter, .topic-body-leave-to {\r\n    opacity: 0;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../../../../thread-loader/dist/cjs.js!../../../../../../../babel-loader/lib/index.js!../../../../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../../../../thread-loader/dist/cjs.js!../../../../../../../babel-loader/lib/index.js!../../../../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Topic.vue?vue&type=template&id=8000520e&scoped=true&\"\nimport script from \"./Topic.vue?vue&type=script&lang=js&\"\nexport * from \"./Topic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Topic.vue?vue&type=style&index=0&id=8000520e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8000520e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=style&index=0&id=8000520e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=style&index=0&id=8000520e&scoped=true&lang=css&\""],"sourceRoot":""}