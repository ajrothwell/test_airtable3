(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tcg_pvc_LegendBox"],{"0524":function(e,t,a){"use strict";a("2d6d"),a("e8fd"),a("9d62"),a("5d53"),a("97cc");var l,n,i=a("b85c"),s=a("53ca"),r={props:{slots:{type:Object,default:function(){return{}}},options:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}}},computed:{nullValue:function(){var e=this.options||{};return e.nullValue}},beforeCreate:function(){},created:function(){},methods:{evaluateSlot:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return e;var n,r=Object(s["a"])(e);if("function"===r){var o=this.$store.state,c=this.$controller,p=e,d=this.item;n=d?p(o,d,c):p(o)}else n=e;if(!1===n);else if(!a.includes("currency")&&!n)return l;var f,u=Object(i["a"])(a);try{var h=function(){var e=f.value,a=t.$config.transforms[e],l=void 0,i=a.globals;i&&(l=Object.keys(window).filter((function(e){return i.includes(e)})).reduce((function(e,t){return e[t]=window[t],e}),{}));var s=a.transform;n=s(n,l)};for(u.s();!(f=u.n()).done;)h()}catch(y){u.e(y)}finally{u.f()}return n}}},o=r,c=a("2877"),p=Object(c["a"])(o,l,n,!1,null,null,null);t["a"]=p.exports},"3d6c":function(e,t,a){"use strict";var l=a("e50b"),n=a.n(l);n.a},"5b50":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{class:e.legendClass,domProps:{innerHTML:e._s(e.legendHtml)}})])},n=[],i=(a("d81d"),a("b85c")),s=(a("f076"),{props:["layer","layerName","layerId","layerDefinition","legend","legendClass","scales"],data:function(){return{legendHtml:"",options:{listTemplate:"<ul>{layers}</ul>",layerTemplate:"<li><ul>{legends}</ul></li>",listRowTemplate:'<li><img width="{width}" height="{height}" src="data:{contentType};base64,{imageData}"><span>{label}</span></li>',emptyLabel:"",container:null}}},computed:{scale:function(){var e=this.$store.state.map.zoom,t=e+1,a=this.$props.scales[t];return a}},watch:{scale:function(e){this.createLegend(e)},legend:function(){console.log("METHOD watch props legend fired, this.$props.layerId:",this.$props.layerId),this.createLegend(this.scale)}},created:function(){this.initialize()},methods:{initialize:function(){if(this.$props.legend)this.createLegend(this.scale);else{var e;this.$props.layerDefinition&&(e=this.$props.layerDefinition.drawingInfo);var t={layerName:this.$props.layerName,layerId:this.$props.layerId,store:this.$store,drawingInfo:e};L.esri.legendControl(this.$props.layer,t)}},createLegend:function(e){var t=this.$props.legend,a="";if(1===t.layers.length){var l,n=t.layers[0],s="",r=Object(i["a"])(n.legend);try{for(r.s();!(l=r.n()).done;){var o=l.value,c=JSON.parse(JSON.stringify(o));c.label||(c.label=""),s+=L.Util.template(this.options.listRowTemplate,c)}}catch(b){r.e(b)}finally{r.f()}a+=L.Util.template(this.options.layerTemplate,{layerName:n.layerName,legends:s})}else{var p,d=Object(i["a"])(t.layers);try{for(d.s();!(p=d.n()).done;){var f=p.value,u="";if(parseFloat(e)>parseFloat(f.maxScale)&&parseFloat(e)<parseFloat(f.minScale)){var h,y=Object(i["a"])(f.legend);try{for(y.s();!(h=y.n()).done;){var m=h.value,g=JSON.parse(JSON.stringify(m));u+=L.Util.template(this.options.listRowTemplate,g)}}catch(b){y.e(b)}finally{y.f()}}a+=L.Util.template(this.options.layerTemplate,{layerName:f.layerName,legends:u})}}catch(b){d.e(b)}finally{d.f()}}var v=L.Util.template(this.options.listTemplate,{layers:a});this.legendHtml=v}}}),r=s,o=(a("3d6c"),a("2877")),c=Object(o["a"])(r,l,n,!1,null,null,null);t["default"]=c.exports},"8cf0":function(e,t,a){},a815:function(e,t,a){"use strict";var l=a("8cf0"),n=a.n(l);n.a},afd4:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{class:e.legendClass,domProps:{innerHTML:e._s(e.legendHtml)}})])},n=[],i=(a("1c7d"),a("b85c")),s=(a("0524"),{props:["layer","layerName","layerId","layerDefinition","legend","legendClass","scales"],data:function(){return{legendHtml:"",options:{listTemplate:"<ul>{layers}</ul>",layerTemplate:"<li><ul>{legends}</ul></li>",listRowTemplate:'<li><img width="{width}" height="{height}" src="data:{contentType};base64,{imageData}"><span>{label}</span></li>',emptyLabel:"",container:null}}},computed:{scale:function(){var e=this.$store.state.map.zoom,t=e+1,a=this.$props.scales[t];return a}},watch:{scale:function(e){this.createLegend(e)},legend:function(){console.log("METHOD watch props legend fired, this.$props.layerId:",this.$props.layerId),this.createLegend(this.scale)}},created:function(){this.initialize()},methods:{initialize:function(){if(this.$props.legend)this.createLegend(this.scale);else{var e;this.$props.layerDefinition&&(e=this.$props.layerDefinition.drawingInfo);var t={layerName:this.$props.layerName,layerId:this.$props.layerId,store:this.$store,drawingInfo:e};L.esri.legendControl(this.$props.layer,t)}},createLegend:function(e){var t=this.$props.legend,a="";if(1===t.layers.length){var l,n=t.layers[0],s="",r=Object(i["a"])(n.legend);try{for(r.s();!(l=r.n()).done;){var o=l.value,c=JSON.parse(JSON.stringify(o));c.label||(c.label=""),s+=L.Util.template(this.options.listRowTemplate,c)}}catch(b){r.e(b)}finally{r.f()}a+=L.Util.template(this.options.layerTemplate,{layerName:n.layerName,legends:s})}else{var p,d=Object(i["a"])(t.layers);try{for(d.s();!(p=d.n()).done;){var f=p.value,u="";if(parseFloat(e)>parseFloat(f.maxScale)&&parseFloat(e)<parseFloat(f.minScale)){var h,y=Object(i["a"])(f.legend);try{for(y.s();!(h=y.n()).done;){var m=h.value,g=JSON.parse(JSON.stringify(m));u+=L.Util.template(this.options.listRowTemplate,g)}}catch(b){y.e(b)}finally{y.f()}}a+=L.Util.template(this.options.layerTemplate,{layerName:f.layerName,legends:u})}}catch(b){d.e(b)}finally{d.f()}}var v=L.Util.template(this.options.listTemplate,{layers:a});this.legendHtml=v}}}),r=s,o=(a("a815"),a("2877")),c=Object(o["a"])(r,l,n,!1,null,null,null);t["default"]=c.exports},e50b:function(e,t,a){}}]);
//# sourceMappingURL=tcg_pvc_LegendBox.js.map